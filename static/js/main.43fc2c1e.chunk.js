(this["webpackJsonpfriday-cards-project"]=this["webpackJsonpfriday-cards-project"]||[]).push([[0],{112:function(e,r,t){},134:function(e,r,t){},135:function(e,r,t){"use strict";t.r(r);var a=t(0),n=t(10),s=t.n(n),o=t(11),i=t(22),c=(t(112),t(95)),l=t(177),d=t(178),u=t(181),j=t(179),b=t(14),p=t(82),O=t.n(p),f=t(83),m=t.n(f),h=t(2),g=function(){return Object(h.jsxs)("div",{className:m.a.error404,children:[Object(h.jsx)("div",{children:"404"}),Object(h.jsx)("div",{children:"Page not found!"}),Object(h.jsx)("div",{children:"\u2014 \u0e05/\u1420. \u032b  .\u141f\\\u0e05\u2014"})]})},w=t(8),x=t(31),v=t(186),S=t(174),P=t(180),y=t(187),R=t(183),E=t(176),I=t(65),T=t.n(I),A=t(86),_=t.n(A).a.create({baseURL:"https://neko-back.herokuapp.com/2.0",withCredentials:!0}),F={email:"",from:"test-front-admin <ai73a@yandex.by>",message:"<div style=\"background-color: lime; padding: 15px\">password recovery link: \n              <a href='http://localhost:3000/friday-cards-project#/newPassword/$token$'>link</a></div>"},N=function(e){return _.post("/auth/login",e)},U=function(){return _.delete("/auth/me",{})},k=function(){return _.post("/auth/me",{})},C=function(e,r){return _.post("auth/register",{email:e,password:r})},L=function(e){return _.post("auth/forgot",Object(w.a)(Object(w.a)({},F),{},{email:e}))},D=function(e,r){return _.post("auth/set-new-password",{password:e,resetPasswordToken:r})},M={status:"idle",error:null},q=function(e){return{type:"APP/SET-STATUS",status:e}},G=function(e){return{type:"APP/SET-ERROR",error:e}},Z={data:null,isLoggedIn:!1},W=function(e){return{type:"login/SET-USER-DATA",data:e}},V=function(e){return{type:"login/SET-IS-LOGGED-IN",value:e}},$=function(){var e=Object(o.b)(),r=Object(o.c)((function(e){return e.login.isLoggedIn})),t=Object(x.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(e){var r={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(r.email="Invalid email address"):r.email="Required",e.password?e.password.length<8&&(r.password="Invalid password"):r.password="Required",r},onSubmit:function(r){var a;e((a=r,function(e){e(q("loading")),N(a).then((function(r){e(q("succeeded")),e(V(!0)),e(W(r.data))})).catch((function(r){e(q("failed"));var t=r.response?r.response.data.error:r.message+", more details in the console";e(G("Error: "+t))}))})),t.resetForm()}});return r?Object(h.jsx)(b.a,{to:"/profile"}):Object(h.jsxs)("div",{className:T.a.loginFormContainer,children:[Object(h.jsx)("form",{onSubmit:t.handleSubmit,children:Object(h.jsx)(v.a,{children:Object(h.jsxs)(S.a,{children:[Object(h.jsx)(P.a,Object(w.a)({label:"Email",margin:"normal"},t.getFieldProps("email"))),t.touched.email&&t.errors.email?Object(h.jsx)("div",{style:{color:"red"},children:t.errors.email}):null,Object(h.jsx)(P.a,Object(w.a)({type:"password",label:"Password",margin:"normal"},t.getFieldProps("password"))),t.touched.password&&t.errors.password?Object(h.jsx)("div",{style:{color:"red"},children:t.errors.password}):null,Object(h.jsx)(y.a,{label:"Remember me",control:Object(h.jsx)(R.a,{onChange:t.handleChange,checked:t.values.rememberMe,name:"rememberMe"})}),Object(h.jsx)(E.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})})}),Object(h.jsx)("div",{className:T.a.forgetPasswordContainer,children:Object(h.jsx)(i.c,{to:se.passwordRecovery,children:"Forget password"})})]})},B=t(91),J=t.n(B),z={info:"",isMailSent:!1},H=function(e){return{type:"IS-MAIL-SENT",isMailSent:e}},Q=function(){var e=Object(o.b)(),r=Object(o.c)((function(e){return e.passwordRecovery})),t=Object(x.a)({initialValues:{email:""},validate:function(e){var r={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(r.email="Invalid email address"):r.email="Required",r},onSubmit:function(r){var a;e((a=r.email,function(e){e(q("loading")),L(a).then((function(r){e({type:"FORGOT-PASSWORD-RESPONSE",info:r.data.info}),e(H(!0)),e(q("succeeded"))})).catch((function(r){e(q("failed")),e(G("Error: "+r.response.data.error)),e(H(!1))}))})),t.resetForm()}});return Object(h.jsx)("div",{children:r.isMailSent?Object(h.jsx)("div",{className:J.a.sentMailResponse,children:"the recovery link has been sent on your email"}):Object(h.jsx)("form",{onSubmit:t.handleSubmit,children:Object(h.jsx)(v.a,{children:Object(h.jsxs)(S.a,{children:[Object(h.jsx)(P.a,Object(w.a)({label:"Email",margin:"normal"},t.getFieldProps("email"))),t.touched.email&&t.errors.email?Object(h.jsx)("div",{style:{color:"red"},children:t.errors.email}):null,Object(h.jsx)(E.a,{type:"submit",variant:"contained",color:"primary",children:"Send recovery-link"})]})})})})},K=t(92),X=t.n(K),Y=function(){var e=Object(o.b)(),r=Object(o.c)((function(e){return e.login.data})),t=Object(o.c)((function(e){return e.login.isLoggedIn}));return Object(a.useEffect)((function(){!r&&e((function(e){e(q("loading")),k().then((function(r){e(q("succeeded")),e(W(r.data)),e(V(!0))})).catch((function(r){e(q("failed"));var t=r.response?r.response.data.error:r.message+", more details in the console";e(G("Error: "+t))}))}))}),[]),t?Object(h.jsx)("div",{className:X.a.profile,children:r&&Object(h.jsxs)("div",{children:["User name: ",r.name," ",Object(h.jsx)("br",{}),"User email: ",r.email," ",Object(h.jsx)("br",{}),"User avatar: ",r.avatar," ",Object(h.jsx)("br",{})]})}):Object(h.jsx)(b.a,{to:"/login"})},ee={passwordIsSet:!1},re=function(){var e=Object(o.b)(),r=Object(o.c)((function(e){return e.newPassword})),t=Object(b.g)().resetPasswordToken,a=Object(x.a)({initialValues:{password:"",repeatPassword:""},validate:function(e){var r={};return e.password?e.password.length<8&&(r.password="Password must be more than 7 characters"):r.password="Required",e.repeatPassword?e.password!==e.repeatPassword&&(r.repeatPassword="Passwords are not equal"):r.repeatPassword="Required",r},onSubmit:function(r){e(function(e,r){return function(t){D(e,r).then((function(e){t({type:"SET-NEW-PASSWORD",passwordIsSet:!0})})).catch((function(e){t(G("Error: "+e.response.data.error))}))}}(r.password,t)),a.resetForm()}});return r.passwordIsSet?Object(h.jsx)(b.a,{to:"/login"}):Object(h.jsx)("div",{children:Object(h.jsx)("form",{onSubmit:a.handleSubmit,children:Object(h.jsx)(v.a,{children:Object(h.jsxs)(S.a,{children:[Object(h.jsx)(P.a,Object(w.a)({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.touched.password&&a.errors.password?Object(h.jsx)("div",{style:{color:"red"},children:a.errors.password}):null,Object(h.jsx)(P.a,Object(w.a)({type:"password",label:"Repeat password",margin:"normal"},a.getFieldProps("repeatPassword"))),a.touched.repeatPassword&&a.errors.repeatPassword?Object(h.jsx)("div",{style:{color:"red"},children:a.errors.repeatPassword}):null,Object(h.jsx)(E.a,{type:"submit",variant:"contained",color:"primary",children:"Set new password"})]})})})})},te={isSignUp:!1},ae=function(e){return{type:"SET-IS-SIGN-UP",value:e}},ne=function(){var e=Object(o.b)(),r=Object(o.c)((function(e){return e.registration.isSignUp})),t=Object(x.a)({initialValues:{email:"",password:"",repeatPassword:""},validate:function(e){var r={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(r.email="Invalid email address"):r.email="Required",e.password?e.password.length<8&&(r.password="Password must be more than 7 characters"):r.password="Required",e.repeatPassword?e.password!==e.repeatPassword&&(r.repeatPassword="Passwords are not equal"):r.repeatPassword="Required",r},onSubmit:function(r){var a,n;e((a=r.email,n=r.password,function(e){e(q("loading")),C(a,n).then((function(r){e(q("succeeded")),e(ae(!0))})).catch((function(r){e(q("failed")),e(G("Error: "+r.response.data.error))}))})),t.resetForm()}});return r?Object(h.jsx)(b.a,{to:"/login"}):Object(h.jsx)("div",{children:Object(h.jsx)("form",{onSubmit:t.handleSubmit,children:Object(h.jsx)(v.a,{children:Object(h.jsxs)(S.a,{children:[Object(h.jsx)(P.a,Object(w.a)({label:"Email",margin:"normal"},t.getFieldProps("email"))),t.touched.email&&t.errors.email?Object(h.jsx)("div",{style:{color:"red"},children:t.errors.email}):null,Object(h.jsx)(P.a,Object(w.a)({type:"password",label:"Password",margin:"normal"},t.getFieldProps("password"))),t.touched.password&&t.errors.password?Object(h.jsx)("div",{style:{color:"red"},children:t.errors.password}):null,Object(h.jsx)(P.a,Object(w.a)({type:"password",label:"Repeat password",margin:"normal"},t.getFieldProps("repeatPassword"))),t.touched.repeatPassword&&t.errors.repeatPassword?Object(h.jsx)("div",{style:{color:"red"},children:t.errors.repeatPassword}):null,Object(h.jsx)(E.a,{type:"submit",variant:"contained",color:"primary",children:"Sign up"})]})})})})},se={login:"/login",passwordRecovery:"/passwordRecovery",profile:"/profile",signUp:"/signUp",newPassword:"/newPassword",error:"/404"},oe=function(){return Object(h.jsx)("div",{className:O.a.currentDisplay,children:Object(h.jsxs)(b.d,{children:[Object(h.jsx)(b.b,{exact:!0,path:"/",render:function(){return Object(h.jsx)(b.a,{to:se.login})}}),Object(h.jsx)(b.b,{path:se.login,render:function(){return Object(h.jsx)($,{})}}),Object(h.jsx)(b.b,{exact:!0,path:se.signUp,render:function(){return Object(h.jsx)(ne,{})}}),Object(h.jsx)(b.b,{exact:!0,path:se.profile,render:function(){return Object(h.jsx)(Y,{})}}),Object(h.jsx)(b.b,{exact:!0,path:se.passwordRecovery,render:function(){return Object(h.jsx)(Q,{})}}),Object(h.jsx)(b.b,{path:"".concat(se.newPassword,"/:resetPasswordToken"),render:function(){return Object(h.jsx)(re,{})}}),Object(h.jsx)(b.b,{path:se.error,render:function(){return Object(h.jsx)(g,{})}}),Object(h.jsx)(b.a,{from:"*",to:se.error})]})})},ie=Object(l.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper}}}));var ce=function(){var e=Object(o.b)(),r=Object(o.c)((function(e){return e.login.isLoggedIn})),t=Object(a.useState)(""),n=Object(c.a)(t,2),s=n[0],l=n[1],b=ie(),p=function(e,r){l(r)};return r?Object(h.jsx)("div",{className:b.root,children:Object(h.jsx)(d.a,{position:"static",children:Object(h.jsxs)(u.a,{value:s,onChange:p,"aria-label":"header tabs",children:[Object(h.jsx)(j.a,{label:"profile",value:"/profile",component:i.b,to:se.profile}),Object(h.jsx)(j.a,{label:"logout",onClick:function(){e((function(e){e(q("loading")),U().then((function(r){e(q("succeeded")),e(V(!1)),e(W(null))})).catch((function(r){e(q("failed"));var t=r.response?r.response.data.error:r.message+", more details in the console";e(G("Error: "+t))}))}))}})]})})}):Object(h.jsx)("div",{className:b.root,children:Object(h.jsx)(d.a,{position:"static",children:Object(h.jsxs)(u.a,{value:s,onChange:p,"aria-label":"simple tabs example",children:[Object(h.jsx)(j.a,{label:"login",value:"/login",component:i.b,to:se.login}),Object(h.jsx)(j.a,{label:"sign up",value:"/signUp",component:i.b,to:se.signUp})]})})})},le=t(185),de=t(182);function ue(e){return Object(h.jsx)(de.a,Object(w.a)({elevation:6,variant:"filled"},e))}function je(){var e=Object(o.b)(),r=Object(o.c)((function(e){return e.app.error})),t=null!==r;return Object(h.jsx)(le.a,{open:t,autoHideDuration:6e3,onClose:function(r,t){"clickaway"!==t&&e(G(null))},children:Object(h.jsx)(ue,{severity:"error",children:r})})}var be=t.p+"static/media/preloader.9ca08101.gif",pe=t(93),Oe=t.n(pe),fe=function(){return Object(h.jsx)("div",{className:Oe.a.loader,children:Object(h.jsx)("img",{src:be,alt:"preloader"})})},me=function(){return"loading"===Object(o.c)((function(e){return e.app.status}))?Object(h.jsx)(fe,{}):Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(ce,{}),Object(h.jsx)(je,{}),Object(h.jsx)(oe,{})]})},he=(t(134),t(37)),ge=t(94),we={},xe=Object(he.c)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"login/SET-USER-DATA":return Object(w.a)(Object(w.a)({},e),{},{data:r.data});case"login/SET-IS-LOGGED-IN":return Object(w.a)(Object(w.a)({},e),{},{isLoggedIn:r.value});default:return e}},registration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"SET-IS-SIGN-UP":return Object(w.a)(Object(w.a)({},e),{},{isSignUp:r.value});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,r=arguments.length>1?arguments[1]:void 0;return r.type,e},passwordRecovery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"FORGOT-PASSWORD-RESPONSE":return Object(w.a)(Object(w.a)({},e),{},{info:r.info});case"IS-MAIL-SENT":return Object(w.a)(Object(w.a)({},e),{},{isMailSent:r.isMailSent});default:return e}},newPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"SET-NEW-PASSWORD":return Object(w.a)(Object(w.a)({},e),{},{passwordIsSet:r.passwordIsSet});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"APP/SET-STATUS":return Object(w.a)(Object(w.a)({},e),{},{status:r.status});case"APP/SET-ERROR":return Object(w.a)(Object(w.a)({},e),{},{error:r.error});default:return e}}}),ve=Object(he.d)(xe,Object(he.a)(ge.a));window.store=ve,console.log(ve.getState());var Se=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,188)).then((function(r){var t=r.getCLS,a=r.getFID,n=r.getFCP,s=r.getLCP,o=r.getTTFB;t(e),a(e),n(e),s(e),o(e)}))};s.a.render(Object(h.jsx)(i.a,{children:Object(h.jsx)(o.a,{store:ve,children:Object(h.jsx)(me,{})})}),document.getElementById("root")),Se()},65:function(e,r,t){e.exports={loginFormContainer:"Login_loginFormContainer__2aD1U",forgetPasswordContainer:"Login_forgetPasswordContainer__2P8CS"}},82:function(e,r,t){e.exports={currentDisplay:"Routes_currentDisplay__1z_mw"}},83:function(e,r,t){e.exports={error404:"Error404_error404__3GaOV"}},91:function(e,r,t){e.exports={sentMailResponse:"PasswordRecovery_sentMailResponse__1B0QB"}},92:function(e,r,t){e.exports={profile:"Profile_profile__27UMu"}},93:function(e,r,t){e.exports={loader:"Preloader_loader__2rl41"}}},[[135,1,2]]]);
//# sourceMappingURL=main.43fc2c1e.chunk.js.map