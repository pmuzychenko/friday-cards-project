(this["webpackJsonpfriday-cards-project"]=this["webpackJsonpfriday-cards-project"]||[]).push([[0],{105:function(e,t,a){e.exports={currentDisplay:"Routes_currentDisplay__2rDE9"}},106:function(e,t,a){e.exports={error404:"Error404_error404__2oog_"}},110:function(e,t,a){e.exports={loader:"Preloader_loader__1jVOj"}},115:function(e,t,a){e.exports={sentMailResponse:"PasswordRecovery_sentMailResponse__3Ih3w"}},143:function(e,t,a){},168:function(e,t,a){},169:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(13),o=a.n(c),s=a(9),i=a(21),l=(a(143),a(33)),d=a(217),u=a(226),j=a(229),b=a(227),p=a(16),O=a(105),f=a.n(O),g=a(106),m=a.n(g),h=a(2),x=function(){return Object(h.jsxs)("div",{className:m.a.error404,children:[Object(h.jsx)("div",{children:"404"}),Object(h.jsx)("div",{children:"Page not found!"}),Object(h.jsx)("div",{children:"\u2014 \u0e05/\u1420. \u032b  .\u141f\\\u0e05\u2014"})]})},v=a(7),w=a(39),C=a(212),S=a(213),P=a(228),y=a(235),k=a(232),_=a(216),R=a(86),N=a.n(R),T=a(109),E=a.n(T).a.create({baseURL:"https://neko-back.herokuapp.com/2.0",withCredentials:!0}),I={email:"",from:"test-front-admin <ai73a@yandex.by>",message:"<div style=\"background-color: lime; padding: 15px\">password recovery link: \n              <a href='http://localhost:3000/friday-cards-project#/newPassword/$token$'>link</a></div>"},A=function(e){return E.post("auth/login",e)},D=function(){return E.delete("auth/me",{})},U=function(){return E.post("auth/me",{})},M=function(e,t){return E.post("auth/register",{email:e,password:t})},H=function(e){return E.post("auth/forgot",Object(v.a)(Object(v.a)({},I),{},{email:e}))},L=function(e,t){return E.post("auth/set-new-password",{password:e,resetPasswordToken:t})},J=function(e,t,a,r,n){return n?E.get("cards/pack?page=".concat(e,"&pageCount=").concat(t,"&sortPacks=").concat(a,"&packName=").concat(r,"&user_id=").concat(n)):E.get("cards/pack?page=".concat(e,"&pageCount=").concat(t,"&sortPacks=").concat(a,"&packName=").concat(r))},F=function(){return E.post("cards/pack",{cardsPack:{name:"PROJECT-CARD"}})},G=function(e){return E.delete("cards/pack?id=".concat(e))},q=function(e){return E.put("cards/pack",{cardsPack:{_id:e,name:"NEW-PACK-NAME"}})},W=function(e,t,a,r){return E.get("cards/card?cardsPack_id=".concat(a,"&page=").concat(e,"&pageCount=").concat(t,"&sortCards=").concat(r))},Z=function(e){return E.post("cards/card",{card:{cardsPack_id:e,question:"CARD-QUESTION",answer:"CARD-ANSWER"}})},V=function(e){return E.delete("cards/card?id=".concat(e))},z=function(e){return E.put("cards/card",{card:{_id:e,question:"NEW-CARD-QUESTION",answer:"NEW-CARD-ANSWER"}})},K={status:"idle",error:null,isInitialized:!1},Q=function(e){return{type:"APP/SET-STATUS",status:e}},B=function(e){return{type:"APP/SET-ERROR",error:e}},$={data:null,isLoggedIn:!1},Y=function(e){return{type:"login/SET-USER-DATA",data:e}},X=function(e){return{type:"login/SET-IS-LOGGED-IN",value:e}},ee=a(110),te=a.n(ee),ae=a(208),re=function(){return Object(h.jsx)("div",{className:te.a.loader,children:Object(h.jsx)(ae.a,{})})},ne=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.login.isLoggedIn})),a=Object(s.c)((function(e){return e.app.status})),r=Object(w.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<8&&(t.password="Invalid password"):t.password="Required",t},onSubmit:function(t){var a;e((a=t,function(e){e(Q("loading")),A(a).then((function(t){e(Q("succeeded")),e(X(!0)),e(Y(t.data))})).catch((function(t){e(Q("failed"));var a=t.response?t.response.data.error:t.message+", more details in the console";e(B("Error: "+a))}))})),r.resetForm()}});return"loading"===a?Object(h.jsx)(re,{}):t?Object(h.jsx)(p.a,{to:"/profile"}):Object(h.jsxs)("div",{className:N.a.loginFormContainer,children:[Object(h.jsx)("form",{onSubmit:r.handleSubmit,children:Object(h.jsx)(C.a,{children:Object(h.jsxs)(S.a,{children:[Object(h.jsx)(P.a,Object(v.a)({label:"Email",margin:"normal"},r.getFieldProps("email"))),r.touched.email&&r.errors.email?Object(h.jsx)("div",{style:{color:"red"},children:r.errors.email}):null,Object(h.jsx)(P.a,Object(v.a)({type:"password",label:"Password",margin:"normal"},r.getFieldProps("password"))),r.touched.password&&r.errors.password?Object(h.jsx)("div",{style:{color:"red"},children:r.errors.password}):null,Object(h.jsx)(y.a,{label:"Remember me",control:Object(h.jsx)(k.a,{onChange:r.handleChange,checked:r.values.rememberMe,name:"rememberMe"})}),Object(h.jsx)(_.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})})}),Object(h.jsx)("div",{className:N.a.forgetPasswordContainer,children:Object(h.jsx)(i.c,{to:ft.passwordRecovery,children:"Forgot password"})})]})},ce=a(115),oe=a.n(ce),se={info:"",isMailSent:!1},ie=function(e){return{type:"IS-MAIL-SENT",isMailSent:e}},le=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.passwordRecovery})),a=Object(w.a)({initialValues:{email:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",t},onSubmit:function(t){var r;e((r=t.email,function(e){e(Q("loading")),H(r).then((function(t){e({type:"FORGOT-PASSWORD-RESPONSE",info:t.data.info}),e(ie(!0)),e(Q("succeeded"))})).catch((function(t){e(Q("failed")),e(B("Error: "+t.response.data.error)),e(ie(!1))}))})),a.resetForm()}});return Object(h.jsx)("div",{children:t.isMailSent?Object(h.jsx)("div",{className:oe.a.sentMailResponse,children:"the recovery link has been sent on your email"}):Object(h.jsx)("form",{onSubmit:a.handleSubmit,children:Object(h.jsx)(C.a,{children:Object(h.jsxs)(S.a,{children:[Object(h.jsx)(P.a,Object(v.a)({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.touched.email&&a.errors.email?Object(h.jsx)("div",{style:{color:"red"},children:a.errors.email}):null,Object(h.jsx)(_.a,{type:"submit",variant:"contained",color:"primary",children:"Send recovery-link"})]})})})})},de=a(75),ue=a.n(de),je=function(){var e=Object(s.c)((function(e){return e.login.isLoggedIn})),t=Object(s.c)((function(e){return e.login.data}));return e?Object(h.jsx)("div",{className:ue.a.profile,children:t&&Object(h.jsxs)("div",{className:ue.a.containerProfile,children:[Object(h.jsxs)("span",{children:["User name: ",t.name]}),Object(h.jsxs)("span",{children:["User email: ",t.email]}),Object(h.jsx)("div",{className:ue.a.avatarContainer,children:Object(h.jsx)("img",{src:t.avatar,alt:"avatar"})})]})}):Object(h.jsx)(p.a,{to:"/login"})},be={passwordIsSet:!1},pe=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.newPassword})),a=Object(p.h)().resetPasswordToken,r=Object(w.a)({initialValues:{password:"",repeatPassword:""},validate:function(e){var t={};return e.password?e.password.length<8&&(t.password="Password must be more than 7 characters"):t.password="Required",e.repeatPassword?e.password!==e.repeatPassword&&(t.repeatPassword="Passwords are not equal"):t.repeatPassword="Required",t},onSubmit:function(t){e(function(e,t){return function(a){L(e,t).then((function(e){a({type:"SET-NEW-PASSWORD",passwordIsSet:!0})})).catch((function(e){a(B("Error: "+e.response.data.error))}))}}(t.password,a)),r.resetForm()}});return t.passwordIsSet?Object(h.jsx)(p.a,{to:"/login"}):Object(h.jsx)("div",{children:Object(h.jsx)("form",{onSubmit:r.handleSubmit,children:Object(h.jsx)(C.a,{children:Object(h.jsxs)(S.a,{children:[Object(h.jsx)(P.a,Object(v.a)({type:"password",label:"Password",margin:"normal"},r.getFieldProps("password"))),r.touched.password&&r.errors.password?Object(h.jsx)("div",{style:{color:"red"},children:r.errors.password}):null,Object(h.jsx)(P.a,Object(v.a)({type:"password",label:"Repeat password",margin:"normal"},r.getFieldProps("repeatPassword"))),r.touched.repeatPassword&&r.errors.repeatPassword?Object(h.jsx)("div",{style:{color:"red"},children:r.errors.repeatPassword}):null,Object(h.jsx)(_.a,{type:"submit",variant:"contained",color:"primary",children:"Set new password"})]})})})})},Oe={isSignUp:!1},fe=function(e){return{type:"SET-IS-SIGN-UP",value:e}},ge=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.registration.isSignUp})),a=Object(w.a)({initialValues:{email:"",password:"",repeatPassword:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<8&&(t.password="Password must be more than 7 characters"):t.password="Required",e.repeatPassword?e.password!==e.repeatPassword&&(t.repeatPassword="Passwords are not equal"):t.repeatPassword="Required",t},onSubmit:function(t){var r,n;e((r=t.email,n=t.password,function(e){e(Q("loading")),M(r,n).then((function(t){e(Q("succeeded")),e(fe(!0))})).catch((function(t){e(Q("failed")),e(B("Error: "+t.response.data.error))}))})),a.resetForm()}});return t?Object(h.jsx)(p.a,{to:"/login"}):Object(h.jsx)("div",{children:Object(h.jsx)("form",{onSubmit:a.handleSubmit,children:Object(h.jsx)(C.a,{children:Object(h.jsxs)(S.a,{children:[Object(h.jsx)(P.a,Object(v.a)({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.touched.email&&a.errors.email?Object(h.jsx)("div",{style:{color:"red"},children:a.errors.email}):null,Object(h.jsx)(P.a,Object(v.a)({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.touched.password&&a.errors.password?Object(h.jsx)("div",{style:{color:"red"},children:a.errors.password}):null,Object(h.jsx)(P.a,Object(v.a)({type:"password",label:"Repeat password",margin:"normal"},a.getFieldProps("repeatPassword"))),a.touched.repeatPassword&&a.errors.repeatPassword?Object(h.jsx)("div",{style:{color:"red"},children:a.errors.repeatPassword}):null,Object(h.jsx)(_.a,{type:"submit",variant:"contained",color:"primary",children:"Sign up"})]})})})})},me={packs:[],columns:[{id:1,name:"Name"},{id:2,name:"Amount of cards"},{id:3,name:"Grade"},{id:4,name:"Date of updates"}],page:1,pageCount:6,cardPacksTotalCount:10},he=function(e,t,a,r,n){return function(c){c(Q("loading")),e&&c(Se(e)),J(e,t,a,r,n).then((function(e){c(Q("succeeded")),c(Ce(e.data.cardPacks)),c(Pe(e.data.cardPacksTotalCount))})).catch((function(e){c(Q("failed")),c(B("Error: "+e.response.data.error))}))}},xe=function(e,t,a){return function(r,n){r(Q("loading"));var c=n().packs,o=c.page,s=c.pageCount;F().then((function(n){r(Q("succeeded")),r(he(o,s,e,t,a))})).catch((function(e){r(Q("failed")),r(B("Error: "+e.response.data.error))}))}},ve=function(e,t,a,r){return function(n,c){n(Q("loading"));var o=c().packs,s=o.page,i=o.pageCount;G(e).then((function(e){n(Q("succeeded")),n(he(s,i,t,a,r))})).catch((function(e){n(Q("failed")),n(B("Error: "+e.response.data.error))}))}},we=function(e,t,a,r){return function(n,c){n(Q("loading"));var o=c().packs,s=o.page,i=o.pageCount;q(e).then((function(e){n(Q("succeeded")),n(he(s,i,t,a,r))})).catch((function(e){n(Q("failed")),n(B("Error: "+e.response.data.error))}))}},Ce=function(e){return{type:"SET-PACKS",packs:e}},Se=function(e){return{type:"SET-CURRENT-PAGE",currentPage:e}},Pe=function(e){return{type:"SET-PACKS-TOTAL-COUNT",cardPacksTotalCount:e}},ye=a(118),ke=a(218),_e=Object(d.a)({nav:{display:"flex",justifyContent:"center",marginBottom:"13px"},ul:{listStyle:"none",padding:0,margin:0,display:"flex",color:"black"}});function Re(e){var t=_e(),a=Object(ke.a)({count:e.totalCount}).items;return Object(h.jsx)("nav",{className:t.nav,children:Object(h.jsx)("ul",{className:t.ul,children:a.map((function(t,a){var r=t.page,n=t.type,c=t.selected,o=Object(ye.a)(t,["page","type","selected"]),s=null;return s="start-ellipsis"===n||"end-ellipsis"===n?"\u2026":"page"===n?Object(h.jsx)("button",Object(v.a)(Object(v.a)({type:"button",style:{fontWeight:c?"bold":void 0,fontSize:"20px",marginRight:"7px"}},o),{},{children:r})):Object(h.jsx)("button",Object(v.a)(Object(v.a)({type:"button",style:{fontSize:"20px",marginRight:"7px"}},o),{},{children:n})),Object(h.jsx)("li",{onClick:function(t){e.onPageChanged(r)},children:s},a)}))})})}var Ne=a(220),Te=a(221),Ee=a(48),Ie=a.n(Ee),Ae=a(73),De=a.n(Ae),Ue=a(234),Me=a(231),He=a(219),Le=a(171),Je=a(116),Fe=a.n(Je),Ge=a(215),qe=Object(d.a)((function(e){return Object(Ue.a)({modal:{display:"flex",alignItems:"center",justifyContent:"space-between"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),display:"flex",flexDirection:"column",alignItems:"center"}})})),We=Object(d.a)((function(e){return Object(Ue.a)({button:{margin:e.spacing(1)}})}));function Ze(e){var t=qe(),a=We(),r=n.a.useState(!1),c=Object(l.a)(r,2),o=c[0],i=c[1],d=Object(s.c)((function(e){var t;return null===(t=e.login.data)||void 0===t?void 0:t._id})),u=e.cardID,j=e.user_id,b=e.text,p=e.startIcon,O=e.color,f=function(){i(!1)};return Object(h.jsxs)("div",{children:[Object(h.jsx)(Ge.a,{onClick:function(){i(!0)},disabled:d!==j,children:p}),Object(h.jsx)(Me.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:o,onClose:f,closeAfterTransition:!0,BackdropComponent:He.a,BackdropProps:{timeout:500},children:Object(h.jsx)(Le.a,{in:o,children:Object(h.jsxs)("div",{className:t.paper,children:[Object(h.jsx)("h2",{id:"transition-modal-title",children:b}),Object(h.jsxs)("div",{children:[Object(h.jsx)(_.a,{onClick:function(){u&&e.onClickHandler(u),f()},disabled:d!==j,startIcon:p,variant:"contained",className:a.button,children:" yes "}),Object(h.jsx)(_.a,{onClick:f,disabled:d!==j,startIcon:Object(h.jsx)(Fe.a,{color:O}),variant:"contained"})]})]})})})]})}var Ve=a(72),ze=a.n(Ve);function Ke(e){var t=Object(s.c)((function(e){var t;return null===(t=e.login.data)||void 0===t?void 0:t._id})),a=e.id,r=e.name,n=e.cardsCount,c=e.grade,o=e.updated,l=e.user_id,d=new Date(o),u=d.getFullYear(),j=d.getMonth()+1<10?"0".concat(d.getMonth()+1):d.getMonth()+1,b=d.getDate()<10?"0".concat(d.getDate()):d.getDate(),p=d.getHours()<10?"0".concat(d.getHours()):d.getHours(),O=d.getMinutes()<10?"0".concat(d.getMinutes()):d.getMinutes(),f="".concat(b,"-").concat(j,"-").concat(u),g="".concat(p,":").concat(O);return Object(h.jsxs)(Ne.a,{className:Ie.a.tablePackRow,children:[Object(h.jsx)(Te.a,{className:Ie.a.tableRowCellName,children:r}),Object(h.jsx)(Te.a,{className:Ie.a.tableRowCellCardsCount,align:"center",children:n}),Object(h.jsx)(Te.a,{className:Ie.a.tableRowCellGrade,align:"center",children:c}),Object(h.jsxs)(Te.a,{className:Ie.a.tableRowCellUpdated,align:"center",children:[f,Object(h.jsx)("br",{}),g]}),Object(h.jsx)(Te.a,{children:Object(h.jsx)(Ze,{onClickHandler:function(){e.updatePack(a)},user_id:l,text:"Update pack?",startIcon:Object(h.jsx)(ze.a,{color:t!==l?"disabled":"primary"}),color:t!==l?"disabled":"primary"})}),Object(h.jsx)(Te.a,{children:Object(h.jsx)(Ze,{onClickHandler:function(){e.deletePack(a)},user_id:l,text:"Are you sure you want to delete this pack?",color:t!==l?"disabled":"primary",startIcon:Object(h.jsx)(De.a,{color:t!==l?"disabled":"primary"})})}),Object(h.jsx)(Te.a,{className:Ie.a.tableRowCellCardsLink,children:Object(h.jsx)(i.c,{to:"/cards/"+a,children:"Cards"})})]})}var Qe=a(224),Be=a(222),$e=a(170),Ye=a(225),Xe=a(223),et=a(236),tt=a(49),at=a.n(tt);function rt(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.login.isLoggedIn})),a=Object(s.c)((function(e){var t;return null===(t=e.login.data)||void 0===t?void 0:t._id})),n=Object(s.c)((function(e){return e.packs.packs})),c=Object(s.c)((function(e){return e.packs.columns})),o=Object(s.c)((function(e){return e.packs.cardPacksTotalCount})),i=Object(s.c)((function(e){return e.packs.pageCount})),d=Object(s.c)((function(e){return e.packs.page})),u=Math.ceil(o/i),j=!!localStorage.myPacksShowValue&&JSON.parse(localStorage.myPacksShowValue),b=localStorage.sortProperty?JSON.parse(localStorage.sortProperty):"",O=localStorage.filterProperty?JSON.parse(localStorage.filterProperty):"",f=Object(r.useState)(j),g=Object(l.a)(f,2),m=g[0],x=g[1],v=Object(r.useState)(b),w=Object(l.a)(v,2),C=w[0],S=w[1],y=Object(r.useState)(O),R=Object(l.a)(y,2),N=R[0],T=R[1],E=(Object(p.g)(),function(t){m?a&&e(ve(t,C,N,a)):e(ve(t,C,N))}),I=function(t){m?a&&e(we(t,C,N,a)):e(we(t,C,N))},A=function(){localStorage.setItem("sortProperty",JSON.stringify("1name"));var t=JSON.parse(localStorage.sortProperty);S(t),m?a&&e(he(d,i,t,N,a)):e(he(d,i,t,N))},D=function(){localStorage.setItem("sortProperty",JSON.stringify("0name"));var t=JSON.parse(localStorage.sortProperty);S(t),m?a&&e(he(d,i,t,N,a)):e(he(d,i,t,N))},U=function(){localStorage.setItem("sortProperty",JSON.stringify("1cardsCount"));var t=JSON.parse(localStorage.sortProperty);S(t),m?a&&e(he(d,i,t,N,a)):e(he(d,i,t,N))},M=function(){localStorage.setItem("sortProperty",JSON.stringify("0cardsCount"));var t=JSON.parse(localStorage.sortProperty);S(t),m?a&&e(he(d,i,t,N,a)):e(he(d,i,t,N))},H=function(){localStorage.setItem("sortProperty",JSON.stringify("1grade"));var t=JSON.parse(localStorage.sortProperty);S(t),m?a&&e(he(d,i,t,N,a)):e(he(d,i,t,N))},L=function(){localStorage.setItem("sortProperty",JSON.stringify("0grade"));var t=JSON.parse(localStorage.sortProperty);S(t),m?a&&e(he(d,i,t,N,a)):e(he(d,i,t,N))};return Object(r.useEffect)((function(){var t=Object.fromEntries(new URL(window.location).searchParams.entries());t.page&&(d=Number(t.page)),m?a&&e(he(d,i,C,N,a)):e(he(d,i,C,N))}),[]),t?Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{className:at.a.packsHeader,children:"PACKS OF CARDS"}),Object(h.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(h.jsx)(P.a,{label:"Search packs by name",style:{marginRight:"30px"},value:N,onChange:function(t){localStorage.setItem("filterProperty",JSON.stringify(t.currentTarget.value));var r=JSON.parse(localStorage.filterProperty);T(r),m?a&&e(he(d,i,C,r,a)):e(he(d,i,C,r))}})}),Object(h.jsxs)("div",{children:[Object(h.jsx)(k.a,{checked:m,onChange:function(t){localStorage.setItem("myPacksShowValue",JSON.stringify(t.currentTarget.checked));var r=JSON.parse(localStorage.myPacksShowValue);x(r),r?a&&e(he(d,i,C,N,a)):e(he(d,i,N,C))},color:"primary"}),Object(h.jsx)("span",{className:at.a.showMyPacksTitle,children:"My packs"})]}),Object(h.jsxs)(Be.a,{component:$e.a,className:at.a.packsTable,children:[Object(h.jsxs)(Xe.a,{children:[Object(h.jsx)(Qe.a,{className:at.a.packsTableHead,children:Object(h.jsxs)(Ne.a,{className:at.a.packsTableHeadColumnRow,children:[c.map((function(e){return Object(h.jsxs)(Te.a,{align:"center",className:at.a.cell,children:[e.name,"Name"===e.name&&Object(h.jsxs)("div",{children:[Object(h.jsx)(et.a,{active:!0,direction:"asc",onClick:A}),Object(h.jsx)(et.a,{active:!0,direction:"desc",onClick:D})]}),"Amount of cards"===e.name&&Object(h.jsxs)("div",{children:[Object(h.jsx)(et.a,{active:!0,direction:"asc",onClick:U}),Object(h.jsx)(et.a,{active:!0,direction:"desc",onClick:M})]}),"Grade"===e.name&&Object(h.jsxs)("div",{children:[Object(h.jsx)(et.a,{active:!0,direction:"asc",onClick:H}),Object(h.jsx)(et.a,{active:!0,direction:"desc",onClick:L})]})]},e.id)})),Object(h.jsx)(Te.a,{colSpan:3,align:"center",children:Object(h.jsx)(_.a,{color:"primary",variant:"contained",onClick:function(){m?a&&e(xe(C,N,a)):e(xe(C,N))},children:"Add pack"})})]})}),Object(h.jsx)(Ye.a,{children:n.map((function(e){return Object(h.jsx)(Ke,{id:e._id,user_id:e.user_id,name:e.name,cardsCount:e.cardsCount,grade:e.grade,updated:e.updated,deletePack:E,updatePack:I},e._id)}))})]}),Object(h.jsx)(Re,{totalCount:u,onPageChanged:function(t){window.history.pushState(null,document.title,"".concat(window.location.pathname,"?page=").concat(t)),m?a&&e(he(t,i,C,N,a)):e(he(t,i,C,N))}})]})]}):Object(h.jsx)(p.a,{to:"/login"})}var nt=a(63),ct={cards:{},columns:[{id:1,name:"Question"},{id:2,name:"Answer"},{id:3,name:"Grade"},{id:4,name:"Updated"}],page:1,pageCount:6,cardsTotalCount:10},ot=function(e,t,a,r){return function(n){n(Q("loading")),n(it(e)),W(e,t,a,r).then((function(e){n(Q("succeeded")),n(st(e.data.cards,a)),n(lt(e.data.cardsTotalCount))})).catch((function(e){n(Q("failed")),n(B("Error: "+e.response.data.error))}))}},st=function(e,t){return{type:"SET-CARDS",cards:e,packID:t}},it=function(e){return{type:"SET-CURRENT-PAGE",currentPage:e}},lt=function(e){return{type:"SET-CARDS-TOTAL-COUNT",cardsTotalCount:e}},dt=a(54),ut=a.n(dt);function jt(e){var t=Object(s.c)((function(e){var t;return null===(t=e.login.data)||void 0===t?void 0:t._id})),a=e.cardID,r=e.question,n=e.answer,c=e.grade,o=e.updated,i=e.user_id,l=new Date(o),d=l.getFullYear(),u=l.getMonth()+1<10?"0".concat(l.getMonth()+1):l.getMonth()+1,j=l.getDate()<10?"0".concat(l.getDate()):l.getDate(),b=l.getHours()<10?"0".concat(l.getHours()):l.getHours(),p=l.getMinutes()<10?"0".concat(l.getMinutes()):l.getMinutes(),O="".concat(j,"-").concat(u,"-").concat(d),f="".concat(b,":").concat(p);return Object(h.jsxs)(Ne.a,{className:ut.a.tableCardRow,children:[Object(h.jsx)(Te.a,{className:ut.a.tableRowCellQuestion,children:r}),Object(h.jsx)(Te.a,{className:ut.a.tableRowCellAnswer,children:n}),Object(h.jsx)(Te.a,{className:ut.a.tableRowCellGrade,align:"center",children:c}),Object(h.jsxs)(Te.a,{className:ut.a.tableRowCellUpdated,align:"center",children:[O,Object(h.jsx)("br",{}),f]}),Object(h.jsx)(Te.a,{children:Object(h.jsx)(Ze,{cardID:a,onClickHandler:function(){e.updateCard(a)},user_id:i,text:"Update card?",startIcon:Object(h.jsx)(ze.a,{color:t!==i?"disabled":"secondary"}),color:t!==i?"disabled":"secondary"})}),Object(h.jsx)(Te.a,{children:Object(h.jsx)(Ze,{cardID:a,onClickHandler:function(){e.deleteCard(a)},user_id:i,text:"Are you sure you want to delete this card?",startIcon:Object(h.jsx)(De.a,{color:t!==i?"disabled":"secondary"}),color:t!==i?"disabled":"secondary"})})]})}var bt=a(55),pt=a.n(bt);function Ot(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.login.isLoggedIn})),a=Object(s.c)((function(e){return e.cards.cards})),n=Object(s.c)((function(e){return e.cards.columns})),c=Object(s.c)((function(e){return e.cards.cardsTotalCount})),o=Object(s.c)((function(e){return e.cards.pageCount})),i=Object(s.c)((function(e){return e.cards.page})),d=Math.ceil(c/o),u=Object(p.i)("/cards/:id"),j=null===u||void 0===u?void 0:u.params.id,b=j&&a[j],O=localStorage.sortPropertyCards?JSON.parse(localStorage.sortPropertyCards):"",f=Object(r.useState)(O),g=Object(l.a)(f,2),m=g[0],x=g[1],v=function(t){j&&e(function(e,t){return function(a,r){a(Q("loading"));var n=r().cards,c=n.page,o=n.pageCount;V(e).then((function(e){a(Q("succeeded")),a(ot(c,o,t))})).catch((function(e){a(Q("failed")),a(B("Error: "+e.response.data.error))}))}}(t,j))},w=function(t){j&&e(function(e,t){return function(a,r){a(Q("loading"));var n=r().packs,c=n.page,o=n.pageCount;z(e).then((function(e){a(Q("succeeded")),a(ot(c,o,t))})).catch((function(e){a(Q("failed")),a(B("Error: "+e.response.data.error))}))}}(t,j))},C=function(){localStorage.setItem("sortPropertyCards",JSON.stringify("1grade"));var t=JSON.parse(localStorage.sortPropertyCards);x(t),j&&e(ot(i,o,j,t))},S=function(){localStorage.setItem("sortPropertyCards",JSON.stringify("0grade"));var t=JSON.parse(localStorage.sortPropertyCards);x(t),j&&e(ot(i,o,j,t))};return Object(r.useEffect)((function(){j&&e(ot(i,o,j,m))}),[]),t?Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{className:pt.a.cardsHeader,children:"CARDS"}),Object(h.jsxs)(Be.a,{component:$e.a,className:pt.a.cardsTable,children:[Object(h.jsxs)(Xe.a,{children:[Object(h.jsx)(Qe.a,{className:pt.a.cardsTableHead,children:Object(h.jsxs)(Ne.a,{className:pt.a.cardsTableHeadColumnRow,children:[n.map((function(e){return Object(h.jsxs)(Te.a,{component:"th",align:"center",className:pt.a.cell,children:[e.name,"Grade"===e.name&&Object(h.jsxs)("div",{children:[Object(h.jsx)(et.a,{active:!0,direction:"asc",onClick:C}),Object(h.jsx)(et.a,{active:!0,direction:"desc",onClick:S})]})]},e.id)})),Object(h.jsx)(Te.a,{colSpan:2,align:"center",children:Object(h.jsx)(_.a,{color:"secondary",variant:"contained",onClick:function(){j&&e(function(e){return function(t,a){t(Q("loading"));var r=a().cards,n=r.page,c=r.pageCount;Z(e).then((function(a){t(Q("succeeded")),t(ot(n,c,e))})).catch((function(e){t(Q("failed")),t(B("Error: "+e.response.data.error))}))}}(j))},children:"Add card"})})]})}),Object(h.jsx)(Ye.a,{children:b&&b.map((function(e){return Object(h.jsx)(jt,{cardID:e._id,user_id:e.user_id,question:e.question,answer:e.answer,grade:e.grade,updated:e.updated,deleteCard:v,updateCard:w},e._id)}))})]}),Object(h.jsx)(Re,{totalCount:d,onPageChanged:function(t){j&&e(ot(t,o,j))}})]})]}):Object(h.jsx)(p.a,{to:"/login"})}var ft={login:"/login",passwordRecovery:"/passwordRecovery",profile:"/profile",signUp:"/signUp",newPassword:"/newPassword",error:"/404",packs:"/packs",cards:"/cards"},gt=function(){return Object(h.jsx)("div",{className:f.a.currentDisplay,children:Object(h.jsxs)(p.d,{children:[Object(h.jsx)(p.b,{exact:!0,path:"/",render:function(){return Object(h.jsx)(p.a,{to:ft.login})}}),Object(h.jsx)(p.b,{path:ft.login,render:function(){return Object(h.jsx)(ne,{})}}),Object(h.jsx)(p.b,{exact:!0,path:ft.signUp,render:function(){return Object(h.jsx)(ge,{})}}),Object(h.jsx)(p.b,{exact:!0,path:ft.profile,render:function(){return Object(h.jsx)(je,{})}}),Object(h.jsx)(p.b,{exact:!0,path:ft.packs,render:function(){return Object(h.jsx)(rt,{})}}),Object(h.jsx)(p.b,{exact:!0,path:"".concat(ft.cards,"/:id"),render:function(){return Object(h.jsx)(Ot,{})}}),Object(h.jsx)(p.b,{exact:!0,path:ft.passwordRecovery,render:function(){return Object(h.jsx)(le,{})}}),Object(h.jsx)(p.b,{path:"".concat(ft.newPassword,"/:resetPasswordToken"),render:function(){return Object(h.jsx)(pe,{})}}),Object(h.jsx)(p.b,{path:ft.error,render:function(){return Object(h.jsx)(x,{})}}),Object(h.jsx)(p.a,{from:"*",to:ft.error})]})})},mt=Object(d.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper}}}));var ht=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.login.isLoggedIn})),a=Object(r.useState)(""),n=Object(l.a)(a,2),c=n[0],o=n[1],d=mt(),p=function(e,t){o(t)};return t?Object(h.jsx)("div",{className:d.root,children:Object(h.jsx)(u.a,{position:"static",children:Object(h.jsxs)(j.a,{value:c,onChange:p,"aria-label":"header tabs",children:[Object(h.jsx)(b.a,{label:"profile",value:"/profile",component:i.b,to:ft.profile}),Object(h.jsx)(b.a,{label:"packs",value:"/packs",component:i.b,to:ft.packs}),Object(h.jsx)(b.a,{label:"logout",onClick:function(){e((function(e){e(Q("loading")),D().then((function(t){e(Q("succeeded")),e(X(!1)),e(Y(null)),localStorage.clear()})).catch((function(t){e(Q("failed"));var a=t.response?t.response.data.error:t.message+", more details in the console";e(B("Error: "+a))}))}))}})]})})}):Object(h.jsx)("div",{className:d.root,children:Object(h.jsx)(u.a,{position:"static",children:Object(h.jsxs)(j.a,{value:c,onChange:p,"aria-label":"simple tabs example",children:[Object(h.jsx)(b.a,{label:"login",value:"/login",component:i.b,to:ft.login}),Object(h.jsx)(b.a,{label:"sign up",value:"/signUp",component:i.b,to:ft.signUp})]})})})},xt=a(233),vt=a(230);function wt(e){return Object(h.jsx)(vt.a,Object(v.a)({elevation:6,variant:"filled"},e))}function Ct(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.app.error})),a=null!==t;return Object(h.jsx)(xt.a,{open:a,autoHideDuration:6e3,onClose:function(t,a){"clickaway"!==a&&e(B(null))},children:Object(h.jsx)(wt,{severity:"error",children:t})})}var St=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.login.data})),a=Object(s.c)((function(e){return e.app.isInitialized}));return Object(r.useEffect)((function(){!t&&e((function(e){e(Q("loading")),U().then((function(t){e(Q("succeeded")),e(Y(t.data)),e(X(!0))})).catch((function(t){e(Q("failed"));var a=t.response?t.response.data.error:t.message+", more details in the console";e(B("Error: "+a))})).finally((function(){e({type:"APP/SET-IS-INITIALIZED",isInitialized:!0})}))}))}),[e,t]),a?Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(ht,{}),Object(h.jsx)(Ct,{}),Object(h.jsx)(gt,{})]}):Object(h.jsx)(re,{})},Pt=(a(168),a(45)),yt=a(117),kt={},_t=Object(Pt.c)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login/SET-USER-DATA":return Object(v.a)(Object(v.a)({},e),{},{data:t.data});case"login/SET-IS-LOGGED-IN":return Object(v.a)(Object(v.a)({},e),{},{isLoggedIn:t.value});default:return e}},registration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-IS-SIGN-UP":return Object(v.a)(Object(v.a)({},e),{},{isSignUp:t.value});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt,t=arguments.length>1?arguments[1]:void 0;return t.type,e},passwordRecovery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FORGOT-PASSWORD-RESPONSE":return Object(v.a)(Object(v.a)({},e),{},{info:t.info});case"IS-MAIL-SENT":return Object(v.a)(Object(v.a)({},e),{},{isMailSent:t.isMailSent});default:return e}},newPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-NEW-PASSWORD":return Object(v.a)(Object(v.a)({},e),{},{passwordIsSet:t.passwordIsSet});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP/SET-STATUS":return Object(v.a)(Object(v.a)({},e),{},{status:t.status});case"APP/SET-ERROR":return Object(v.a)(Object(v.a)({},e),{},{error:t.error});case"APP/SET-IS-INITIALIZED":return Object(v.a)(Object(v.a)({},e),{},{isInitialized:t.isInitialized});default:return e}},packs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-PACKS":return Object(v.a)(Object(v.a)({},e),{},{packs:t.packs.map((function(e){return Object(v.a)({},e)}))});case"SET-PACKS-TOTAL-COUNT":return Object(v.a)(Object(v.a)({},e),{},{cardPacksTotalCount:t.cardPacksTotalCount});case"SET-CURRENT-PAGE":return Object(v.a)(Object(v.a)({},e),{},{page:t.currentPage});default:return e}},cards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-CARDS":return Object(v.a)(Object(v.a)({},e),{},{cards:Object(nt.a)({},t.packID,t.cards)});case"SET-CARDS-TOTAL-COUNT":return Object(v.a)(Object(v.a)({},e),{},{cardsTotalCount:t.cardsTotalCount});case"SET-CURRENT-PAGE":return Object(v.a)(Object(v.a)({},e),{},{page:t.currentPage});default:return e}}}),Rt=Object(Pt.d)(_t,Object(Pt.a)(yt.a));window.store=Rt,console.log(Rt.getState());var Nt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,237)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),r(e),n(e),c(e),o(e)}))};o.a.render(Object(h.jsx)(i.a,{basename:"/friday-cards-project",children:Object(h.jsx)(s.a,{store:Rt,children:Object(h.jsx)(St,{})})}),document.getElementById("root")),Nt()},48:function(e,t,a){e.exports={tablePackRow:"Pack_tablePackRow__2eKV6",tableRowCellName:"Pack_tableRowCellName__3O8XQ",tableRowCellCardsCount:"Pack_tableRowCellCardsCount__2hA7C",tableRowCellGrade:"Pack_tableRowCellGrade__thz4Q",tableRowCellUpdated:"Pack_tableRowCellUpdated___Jesj",tableRowCellCardsLink:"Pack_tableRowCellCardsLink__3jrql"}},49:function(e,t,a){e.exports={packsHeader:"Packs_packsHeader__2RK9l",showMyPacksTitle:"Packs_showMyPacksTitle__3mNtJ",packsTable:"Packs_packsTable__1vmPs",packsTableHead:"Packs_packsTableHead__2bWDe",packsTableHeadColumnRow:"Packs_packsTableHeadColumnRow__1dTPo",cell:"Packs_cell__23skK"}},54:function(e,t,a){e.exports={tableCardRow:"Card_tableCardRow__3WRNI",tableRowCellQuestion:"Card_tableRowCellQuestion__3UVPu",tableRowCellAnswer:"Card_tableRowCellAnswer__1EzlM",tableRowCellGrade:"Card_tableRowCellGrade__L4gSP",tableRowCellUpdated:"Card_tableRowCellUpdated__3YMZL"}},55:function(e,t,a){e.exports={cardsHeader:"Cards_cardsHeader__3RndM",cardsTable:"Cards_cardsTable__uHFhc",cardsTableHead:"Cards_cardsTableHead__3rhbl",cardsTableHeadColumnRow:"Cards_cardsTableHeadColumnRow__3s8pF",cell:"Cards_cell__NTB7u"}},75:function(e,t,a){e.exports={profile:"Profile_profile__2x015",containerProfile:"Profile_containerProfile__iFORM",avatarContainer:"Profile_avatarContainer__20fxu"}},86:function(e,t,a){e.exports={loginFormContainer:"Login_loginFormContainer__2L8NZ",forgetPasswordContainer:"Login_forgetPasswordContainer__3trWV"}}},[[169,1,2]]]);
//# sourceMappingURL=main.1679daab.chunk.js.map