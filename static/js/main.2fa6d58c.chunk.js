(this["webpackJsonpfriday-cards-project"]=this["webpackJsonpfriday-cards-project"]||[]).push([[0],{118:function(e,t,r){},142:function(e,t,r){},143:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(12),s=r.n(a),c=r(9),o=r(23),i=(r(118),r(99)),l=r(194),d=r(204),u=r(207),j=r(205),b=r(15),p=r(86),O=r.n(p),f=r(87),h=r.n(f),m=r(2),g=function(){return Object(m.jsxs)("div",{className:h.a.error404,children:[Object(m.jsx)("div",{children:"404"}),Object(m.jsx)("div",{children:"Page not found!"}),Object(m.jsx)("div",{children:"\u2014 \u0e05/\u1420. \u032b  .\u141f\\\u0e05\u2014"})]})},x=r(7),v=r(34),w=r(212),S=r(191),P=r(206),y=r(213),E=r(209),T=r(193),k=r(66),C=r.n(k),R=r(90),I=r.n(R).a.create({baseURL:"https://neko-back.herokuapp.com/2.0",withCredentials:!0}),A={email:"",from:"test-front-admin <ai73a@yandex.by>",message:"<div style=\"background-color: lime; padding: 15px\">password recovery link: \n              <a href='http://localhost:3000/friday-cards-project#/newPassword/$token$'>link</a></div>"},N=function(e){return I.post("/auth/login",e)},_=function(){return I.delete("/auth/me",{})},U=function(){return I.post("/auth/me",{})},F=function(e,t){return I.post("auth/register",{email:e,password:t})},L=function(e){return I.post("auth/forgot",Object(x.a)(Object(x.a)({},A),{},{email:e}))},D=function(e,t){return I.post("auth/set-new-password",{password:e,resetPasswordToken:t})},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return I.get("cards/pack?page=".concat(e,"&pageCount=").concat(t))},G={status:"idle",error:null},q=function(e){return{type:"APP/SET-STATUS",status:e}},Z=function(e){return{type:"APP/SET-ERROR",error:e}},W={data:null,isLoggedIn:!1,isInitialized:!1},z=function(e){return{type:"login/SET-USER-DATA",data:e}},B=function(e){return{type:"login/SET-IS-LOGGED-IN",value:e}},V=function(){return function(e){U().then((function(t){t.data&&(e(q("succeeded")),e(z(t.data)),e(B(!0))),e({type:"SET-IS-INITIALIED",value:!0})})).catch((function(t){e(q("failed"));var r=t.response?t.response.data.error:t.message+", more details in the console";e(Z("Error: "+r))}))}},$=function(){var e=Object(c.b)(),t=Object(c.c)((function(e){return e.login.isLoggedIn})),r=Object(v.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<8&&(t.password="Invalid password"):t.password="Required",t},onSubmit:function(t){var n;e((n=t,function(e){e(q("loading")),N(n).then((function(t){e(q("succeeded")),e(B(!0)),e(z(t.data))})).catch((function(t){e(q("failed"));var r=t.response?t.response.data.error:t.message+", more details in the console";e(Z("Error: "+r))}))})),r.resetForm()}});return t?Object(m.jsx)(b.a,{to:"/profile"}):Object(m.jsxs)("div",{className:C.a.loginFormContainer,children:[Object(m.jsx)("form",{onSubmit:r.handleSubmit,children:Object(m.jsx)(w.a,{children:Object(m.jsxs)(S.a,{children:[Object(m.jsx)(P.a,Object(x.a)({label:"Email",margin:"normal"},r.getFieldProps("email"))),r.touched.email&&r.errors.email?Object(m.jsx)("div",{style:{color:"red"},children:r.errors.email}):null,Object(m.jsx)(P.a,Object(x.a)({type:"password",label:"Password",margin:"normal"},r.getFieldProps("password"))),r.touched.password&&r.errors.password?Object(m.jsx)("div",{style:{color:"red"},children:r.errors.password}):null,Object(m.jsx)(y.a,{label:"Remember me",control:Object(m.jsx)(E.a,{onChange:r.handleChange,checked:r.values.rememberMe,name:"rememberMe"})}),Object(m.jsx)(T.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})})}),Object(m.jsx)("div",{className:C.a.forgetPasswordContainer,children:Object(m.jsx)(o.c,{to:Te.passwordRecovery,children:"Forget password"})})]})},K=r(95),J=r.n(K),H={info:"",isMailSent:!1},Q=function(e){return{type:"IS-MAIL-SENT",isMailSent:e}},X=function(){var e=Object(c.b)(),t=Object(c.c)((function(e){return e.passwordRecovery})),r=Object(v.a)({initialValues:{email:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",t},onSubmit:function(t){var n;e((n=t.email,function(e){e(q("loading")),L(n).then((function(t){e({type:"FORGOT-PASSWORD-RESPONSE",info:t.data.info}),e(Q(!0)),e(q("succeeded"))})).catch((function(t){e(q("failed")),e(Z("Error: "+t.response.data.error)),e(Q(!1))}))})),r.resetForm()}});return Object(m.jsx)("div",{children:t.isMailSent?Object(m.jsx)("div",{className:J.a.sentMailResponse,children:"the recovery link has been sent on your email"}):Object(m.jsx)("form",{onSubmit:r.handleSubmit,children:Object(m.jsx)(w.a,{children:Object(m.jsxs)(S.a,{children:[Object(m.jsx)(P.a,Object(x.a)({label:"Email",margin:"normal"},r.getFieldProps("email"))),r.touched.email&&r.errors.email?Object(m.jsx)("div",{style:{color:"red"},children:r.errors.email}):null,Object(m.jsx)(T.a,{type:"submit",variant:"contained",color:"primary",children:"Send recovery-link"})]})})})})},Y=r(96),ee=r.n(Y),te=function(){Object(c.b)();var e=Object(c.c)((function(e){return e.login.data}));return Object(c.c)((function(e){return e.login.isLoggedIn}))?Object(m.jsx)("div",{className:ee.a.profile,children:e&&Object(m.jsxs)("div",{children:["User name: ",e.name," ",Object(m.jsx)("br",{}),"User email: ",e.email," ",Object(m.jsx)("br",{}),"User avatar: ",e.avatar," ",Object(m.jsx)("br",{})]})}):Object(m.jsx)(b.a,{to:"/login"})},re={passwordIsSet:!1},ne=function(){var e=Object(c.b)(),t=Object(c.c)((function(e){return e.newPassword})),r=Object(b.g)().resetPasswordToken,n=Object(v.a)({initialValues:{password:"",repeatPassword:""},validate:function(e){var t={};return e.password?e.password.length<8&&(t.password="Password must be more than 7 characters"):t.password="Required",e.repeatPassword?e.password!==e.repeatPassword&&(t.repeatPassword="Passwords are not equal"):t.repeatPassword="Required",t},onSubmit:function(t){e(function(e,t){return function(r){D(e,t).then((function(e){r({type:"SET-NEW-PASSWORD",passwordIsSet:!0})})).catch((function(e){r(Z("Error: "+e.response.data.error))}))}}(t.password,r)),n.resetForm()}});return t.passwordIsSet?Object(m.jsx)(b.a,{to:"/login"}):Object(m.jsx)("div",{children:Object(m.jsx)("form",{onSubmit:n.handleSubmit,children:Object(m.jsx)(w.a,{children:Object(m.jsxs)(S.a,{children:[Object(m.jsx)(P.a,Object(x.a)({type:"password",label:"Password",margin:"normal"},n.getFieldProps("password"))),n.touched.password&&n.errors.password?Object(m.jsx)("div",{style:{color:"red"},children:n.errors.password}):null,Object(m.jsx)(P.a,Object(x.a)({type:"password",label:"Repeat password",margin:"normal"},n.getFieldProps("repeatPassword"))),n.touched.repeatPassword&&n.errors.repeatPassword?Object(m.jsx)("div",{style:{color:"red"},children:n.errors.repeatPassword}):null,Object(m.jsx)(T.a,{type:"submit",variant:"contained",color:"primary",children:"Set new password"})]})})})})},ae={isSignUp:!1},se=function(e){return{type:"SET-IS-SIGN-UP",value:e}},ce=function(){var e=Object(c.b)(),t=Object(c.c)((function(e){return e.registration.isSignUp})),r=Object(v.a)({initialValues:{email:"",password:"",repeatPassword:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<8&&(t.password="Password must be more than 7 characters"):t.password="Required",e.repeatPassword?e.password!==e.repeatPassword&&(t.repeatPassword="Passwords are not equal"):t.repeatPassword="Required",t},onSubmit:function(t){var n,a;e((n=t.email,a=t.password,function(e){e(q("loading")),F(n,a).then((function(t){e(q("succeeded")),e(se(!0))})).catch((function(t){e(q("failed")),e(Z("Error: "+t.response.data.error))}))})),r.resetForm()}});return t?Object(m.jsx)(b.a,{to:"/login"}):Object(m.jsx)("div",{children:Object(m.jsx)("form",{onSubmit:r.handleSubmit,children:Object(m.jsx)(w.a,{children:Object(m.jsxs)(S.a,{children:[Object(m.jsx)(P.a,Object(x.a)({label:"Email",margin:"normal"},r.getFieldProps("email"))),r.touched.email&&r.errors.email?Object(m.jsx)("div",{style:{color:"red"},children:r.errors.email}):null,Object(m.jsx)(P.a,Object(x.a)({type:"password",label:"Password",margin:"normal"},r.getFieldProps("password"))),r.touched.password&&r.errors.password?Object(m.jsx)("div",{style:{color:"red"},children:r.errors.password}):null,Object(m.jsx)(P.a,Object(x.a)({type:"password",label:"Repeat password",margin:"normal"},r.getFieldProps("repeatPassword"))),r.touched.repeatPassword&&r.errors.repeatPassword?Object(m.jsx)("div",{style:{color:"red"},children:r.errors.repeatPassword}):null,Object(m.jsx)(T.a,{type:"submit",variant:"contained",color:"primary",children:"Sign up"})]})})})})},oe={packs:[],columns:[{id:1,name:"Name"},{id:2,name:"Amount of cards"},{id:3,name:"Grade"},{id:4,name:"Date of updates"}],page:1,pageCount:8,cardPacksTotalCount:8,maxCardsCount:null,minCardsCount:null},ie=function(e,t){return function(r){r(de(e)),M(e,t).then((function(e){r(q("succeeded")),r(le(e.data.cardPacks)),r(ue(e.data.cardPacksTotalCount))})).catch((function(e){r(q("failed")),r(Z("Error: "+e.response.data.error))}))}},le=function(e){return{type:"SET-PACKS",packs:e}},de=function(e){return{type:"SET-CURRENT-PAGE",currentPage:e}},ue=function(e){return{type:"SET-PACKS-TOTAL-COUNT",cardPacksTotalCount:e}},je=r(100),be=r(195),pe=Object(l.a)({nav:{display:"flex",justifyContent:"center",marginBottom:"13px"},ul:{listStyle:"none",padding:0,margin:0,display:"flex",color:"black"}});function Oe(e){var t=pe(),r=Object(be.a)({count:e.totalCount}).items;return Object(m.jsx)("nav",{className:t.nav,children:Object(m.jsx)("ul",{className:t.ul,children:r.map((function(t,r){var n=t.page,a=t.type,s=t.selected,c=Object(je.a)(t,["page","type","selected"]),o=null;return o="start-ellipsis"===a||"end-ellipsis"===a?"\u2026":"page"===a?Object(m.jsx)("button",Object(x.a)(Object(x.a)({type:"button",style:{fontWeight:s?"bold":void 0,fontSize:"20px",marginRight:"7px"}},c),{},{children:n})):Object(m.jsx)("button",Object(x.a)(Object(x.a)({type:"button",style:{fontSize:"20px",marginRight:"7px"}},c),{},{children:a})),Object(m.jsx)("li",{onClick:function(t){e.onPageChanged(n)},children:o},r)}))})})}var fe=r(199),he=r(200),me=r(192),ge=r(202),xe=r(203),ve=r(198),we=r(196),Se=r(144),Pe=r(201),ye=r(197);function Ee(){var e=Object(c.b)(),t=Object(c.c)((function(e){return e.packs.packs})),r=Object(c.c)((function(e){return e.packs.columns})),a=Object(c.c)((function(e){return e.packs.cardPacksTotalCount})),s=Object(c.c)((function(e){return e.packs.pageCount})),o=Object(c.c)((function(e){return e.packs.page})),i=Math.ceil(a/s);return Object(n.useEffect)((function(){e(V()),e(ie(o,s))}),[]),Object(m.jsxs)(we.a,{component:Se.a,children:[Object(m.jsxs)(ye.a,{children:[Object(m.jsx)(ve.a,{children:Object(m.jsxs)(fe.a,{children:[r.map((function(e){return Object(m.jsx)(he.a,{component:"th",style:{fontWeight:"bold"},children:e.name},e.id)})),Object(m.jsx)(he.a,{colSpan:2,children:Object(m.jsx)(T.a,{color:"primary",variant:"contained",onClick:function(){return alert("add")},children:"Add pack"})})]})}),Object(m.jsx)(Pe.a,{children:t.map((function(e){return Object(m.jsxs)(fe.a,{children:[Object(m.jsx)(he.a,{children:e.name}),Object(m.jsx)(he.a,{children:e.cardsCount}),Object(m.jsx)(he.a,{children:e.grade}),Object(m.jsx)(he.a,{children:e.updated}),Object(m.jsx)(he.a,{children:Object(m.jsx)(me.a,{onClick:function(){return alert("edit")},children:Object(m.jsx)(ge.a,{color:"primary"})})}),Object(m.jsx)(he.a,{children:Object(m.jsx)(me.a,{onClick:function(){return alert("delete")},children:Object(m.jsx)(xe.a,{color:"secondary"})})})]},e._id)}))})]}),Object(m.jsx)(Oe,{totalCount:i,onPageChanged:function(t){e(ie(t,s))}})]})}var Te={login:"/login",passwordRecovery:"/passwordRecovery",profile:"/profile",signUp:"/signUp",newPassword:"/newPassword",error:"/404",packs:"/packs"},ke=function(){return Object(m.jsx)("div",{className:O.a.currentDisplay,children:Object(m.jsxs)(b.d,{children:[Object(m.jsx)(b.b,{exact:!0,path:"/",render:function(){return Object(m.jsx)(b.a,{to:Te.login})}}),Object(m.jsx)(b.b,{path:Te.login,render:function(){return Object(m.jsx)($,{})}}),Object(m.jsx)(b.b,{exact:!0,path:Te.signUp,render:function(){return Object(m.jsx)(ce,{})}}),Object(m.jsx)(b.b,{exact:!0,path:Te.profile,render:function(){return Object(m.jsx)(te,{})}}),Object(m.jsx)(b.b,{exact:!0,path:Te.packs,render:function(){return Object(m.jsx)(Ee,{})}}),Object(m.jsx)(b.b,{exact:!0,path:Te.passwordRecovery,render:function(){return Object(m.jsx)(X,{})}}),Object(m.jsx)(b.b,{path:"".concat(Te.newPassword,"/:resetPasswordToken"),render:function(){return Object(m.jsx)(ne,{})}}),Object(m.jsx)(b.b,{path:Te.error,render:function(){return Object(m.jsx)(g,{})}}),Object(m.jsx)(b.a,{from:"*",to:Te.error})]})})},Ce=Object(l.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper}}}));var Re=function(){var e=Object(c.b)(),t=Object(c.c)((function(e){return e.login.isLoggedIn})),r=Object(n.useState)(""),a=Object(i.a)(r,2),s=a[0],l=a[1],b=Ce(),p=function(e,t){l(t)};return t?Object(m.jsx)("div",{className:b.root,children:Object(m.jsx)(d.a,{position:"static",children:Object(m.jsxs)(u.a,{value:s,onChange:p,"aria-label":"header tabs",children:[Object(m.jsx)(j.a,{label:"profile",value:"/profile",component:o.b,to:Te.profile}),Object(m.jsx)(j.a,{label:"packs",value:"/packs",component:o.b,to:Te.packs}),Object(m.jsx)(j.a,{label:"logout",onClick:function(){e((function(e){e(q("loading")),_().then((function(t){e(q("succeeded")),e(B(!1)),e(z(null))})).catch((function(t){e(q("failed"));var r=t.response?t.response.data.error:t.message+", more details in the console";e(Z("Error: "+r))}))}))}})]})})}):Object(m.jsx)("div",{className:b.root,children:Object(m.jsx)(d.a,{position:"static",children:Object(m.jsxs)(u.a,{value:s,onChange:p,"aria-label":"simple tabs example",children:[Object(m.jsx)(j.a,{label:"login",value:"/login",component:o.b,to:Te.login}),Object(m.jsx)(j.a,{label:"sign up",value:"/signUp",component:o.b,to:Te.signUp})]})})})},Ie=r(211),Ae=r(208);function Ne(e){return Object(m.jsx)(Ae.a,Object(x.a)({elevation:6,variant:"filled"},e))}function _e(){var e=Object(c.b)(),t=Object(c.c)((function(e){return e.app.error})),r=null!==t;return Object(m.jsx)(Ie.a,{open:r,autoHideDuration:6e3,onClose:function(t,r){"clickaway"!==r&&e(Z(null))},children:Object(m.jsx)(Ne,{severity:"error",children:t})})}var Ue=r.p+"static/media/preloader.9ca08101.gif",Fe=r(97),Le=r.n(Fe),De=function(){return Object(m.jsx)("div",{className:Le.a.loader,children:Object(m.jsx)("img",{src:Ue,alt:"preloader"})})},Me=function(){var e=Object(c.b)(),t=Object(c.c)((function(e){return e.app.status}));return Object(n.useEffect)((function(){e(V())}),[]),"loading"===t?Object(m.jsx)(De,{}):Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(Re,{}),Object(m.jsx)(_e,{}),Object(m.jsx)(ke,{})]})},Ge=(r(142),r(38)),qe=r(98),Ze={},We=Object(Ge.c)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login/SET-USER-DATA":return Object(x.a)(Object(x.a)({},e),{},{data:t.data});case"login/SET-IS-LOGGED-IN":return Object(x.a)(Object(x.a)({},e),{},{isLoggedIn:t.value});case"SET-IS-INITIALIED":return Object(x.a)(Object(x.a)({},e),{},{isInitialized:t.value});default:return e}},registration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-IS-SIGN-UP":return Object(x.a)(Object(x.a)({},e),{},{isSignUp:t.value});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;return t.type,e},passwordRecovery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FORGOT-PASSWORD-RESPONSE":return Object(x.a)(Object(x.a)({},e),{},{info:t.info});case"IS-MAIL-SENT":return Object(x.a)(Object(x.a)({},e),{},{isMailSent:t.isMailSent});default:return e}},newPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-NEW-PASSWORD":return Object(x.a)(Object(x.a)({},e),{},{passwordIsSet:t.passwordIsSet});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP/SET-STATUS":return Object(x.a)(Object(x.a)({},e),{},{status:t.status});case"APP/SET-ERROR":return Object(x.a)(Object(x.a)({},e),{},{error:t.error});default:return e}},packs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-PACKS":return Object(x.a)(Object(x.a)({},e),{},{packs:t.packs});case"SET-PACKS-TOTAL-COUNT":return Object(x.a)(Object(x.a)({},e),{},{cardPacksTotalCount:t.cardPacksTotalCount});case"SET-CURRENT-PAGE":return Object(x.a)(Object(x.a)({},e),{},{page:t.currentPage});default:return e}}}),ze=Object(Ge.d)(We,Object(Ge.a)(qe.a));window.store=ze,console.log(ze.getState());var Be=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,214)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;r(e),n(e),a(e),s(e),c(e)}))};s.a.render(Object(m.jsx)(o.a,{children:Object(m.jsx)(c.a,{store:ze,children:Object(m.jsx)(Me,{})})}),document.getElementById("root")),Be()},66:function(e,t,r){e.exports={loginFormContainer:"Login_loginFormContainer__2aD1U",forgetPasswordContainer:"Login_forgetPasswordContainer__2P8CS"}},86:function(e,t,r){e.exports={currentDisplay:"Routes_currentDisplay__1z_mw"}},87:function(e,t,r){e.exports={error404:"Error404_error404__3GaOV"}},95:function(e,t,r){e.exports={sentMailResponse:"PasswordRecovery_sentMailResponse__1B0QB"}},96:function(e,t,r){e.exports={profile:"Profile_profile__27UMu"}},97:function(e,t,r){e.exports={loader:"Preloader_loader__2rl41"}}},[[143,1,2]]]);
//# sourceMappingURL=main.2fa6d58c.chunk.js.map