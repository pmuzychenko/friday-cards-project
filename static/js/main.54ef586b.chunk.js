(this["webpackJsonpfriday-cards-project"]=this["webpackJsonpfriday-cards-project"]||[]).push([[0],{118:function(e,t,r){},142:function(e,t,r){},143:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(12),c=r.n(a),s=r(9),o=r(21),i=(r(118),r(99)),l=r(194),d=r(204),u=r(207),j=r(205),b=r(15),p=r(86),O=r.n(p),f=r(87),h=r.n(f),m=r(2),g=function(){return Object(m.jsxs)("div",{className:h.a.error404,children:[Object(m.jsx)("div",{children:"404"}),Object(m.jsx)("div",{children:"Page not found!"}),Object(m.jsx)("div",{children:"\u2014 \u0e05/\u1420. \u032b  .\u141f\\\u0e05\u2014"})]})},x=r(7),v=r(34),w=r(212),P=r(191),S=r(206),y=r(213),E=r(209),k=r(193),T=r(66),C=r.n(T),R=r(90),I=r.n(R).a.create({baseURL:"https://neko-back.herokuapp.com/2.0",withCredentials:!0}),A={email:"",from:"test-front-admin <ai73a@yandex.by>",message:"<div style=\"background-color: lime; padding: 15px\">password recovery link: \n              <a href='http://localhost:3000/friday-cards-project#/newPassword/$token$'>link</a></div>"},N=function(e){return I.post("/auth/login",e)},_=function(){return I.delete("/auth/me",{})},U=function(){return I.post("/auth/me",{})},F=function(e,t){return I.post("auth/register",{email:e,password:t})},L=function(e){return I.post("auth/forgot",Object(x.a)(Object(x.a)({},A),{},{email:e}))},D=function(e,t){return I.post("auth/set-new-password",{password:e,resetPasswordToken:t})},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return I.get("cards/pack?page=".concat(e,"&pageCount=").concat(t))},G=function(e){return I.post("cards/pack",{cardsPack:{name:e}})},Z={status:"idle",error:null,isInitialized:!1},q=function(e){return{type:"APP/SET-STATUS",status:e}},z=function(e){return{type:"APP/SET-ERROR",error:e}},W={data:null,isLoggedIn:!1},B=function(e){return{type:"login/SET-USER-DATA",data:e}},K=function(e){return{type:"login/SET-IS-LOGGED-IN",value:e}},V=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.login.isLoggedIn})),r=Object(v.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<8&&(t.password="Invalid password"):t.password="Required",t},onSubmit:function(t){var n;e((n=t,function(e){e(q("loading")),N(n).then((function(t){e(q("succeeded")),e(K(!0)),e(B(t.data))})).catch((function(t){e(q("failed"));var r=t.response?t.response.data.error:t.message+", more details in the console";e(z("Error: "+r))}))})),r.resetForm()}});return t?Object(m.jsx)(b.a,{to:"/profile"}):Object(m.jsxs)("div",{className:C.a.loginFormContainer,children:[Object(m.jsx)("form",{onSubmit:r.handleSubmit,children:Object(m.jsx)(w.a,{children:Object(m.jsxs)(P.a,{children:[Object(m.jsx)(S.a,Object(x.a)({label:"Email",margin:"normal"},r.getFieldProps("email"))),r.touched.email&&r.errors.email?Object(m.jsx)("div",{style:{color:"red"},children:r.errors.email}):null,Object(m.jsx)(S.a,Object(x.a)({type:"password",label:"Password",margin:"normal"},r.getFieldProps("password"))),r.touched.password&&r.errors.password?Object(m.jsx)("div",{style:{color:"red"},children:r.errors.password}):null,Object(m.jsx)(y.a,{label:"Remember me",control:Object(m.jsx)(E.a,{onChange:r.handleChange,checked:r.values.rememberMe,name:"rememberMe"})}),Object(m.jsx)(k.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})})}),Object(m.jsx)("div",{className:C.a.forgetPasswordContainer,children:Object(m.jsx)(o.c,{to:Te.passwordRecovery,children:"Forget password"})})]})},$=r(95),J=r.n($),H={info:"",isMailSent:!1},Q=function(e){return{type:"IS-MAIL-SENT",isMailSent:e}},X=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.passwordRecovery})),r=Object(v.a)({initialValues:{email:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",t},onSubmit:function(t){var n;e((n=t.email,function(e){e(q("loading")),L(n).then((function(t){e({type:"FORGOT-PASSWORD-RESPONSE",info:t.data.info}),e(Q(!0)),e(q("succeeded"))})).catch((function(t){e(q("failed")),e(z("Error: "+t.response.data.error)),e(Q(!1))}))})),r.resetForm()}});return Object(m.jsx)("div",{children:t.isMailSent?Object(m.jsx)("div",{className:J.a.sentMailResponse,children:"the recovery link has been sent on your email"}):Object(m.jsx)("form",{onSubmit:r.handleSubmit,children:Object(m.jsx)(w.a,{children:Object(m.jsxs)(P.a,{children:[Object(m.jsx)(S.a,Object(x.a)({label:"Email",margin:"normal"},r.getFieldProps("email"))),r.touched.email&&r.errors.email?Object(m.jsx)("div",{style:{color:"red"},children:r.errors.email}):null,Object(m.jsx)(k.a,{type:"submit",variant:"contained",color:"primary",children:"Send recovery-link"})]})})})})},Y=r(96),ee=r.n(Y),te=function(){var e=Object(s.c)((function(e){return e.login.isLoggedIn})),t=Object(s.c)((function(e){return e.login.data}));return e?Object(m.jsx)("div",{className:ee.a.profile,children:t&&Object(m.jsxs)("div",{children:["User name: ",t.name," ",Object(m.jsx)("br",{}),"User email: ",t.email," ",Object(m.jsx)("br",{}),"User avatar: ",t.avatar," ",Object(m.jsx)("br",{})]})}):Object(m.jsx)(b.a,{to:"/login"})},re={passwordIsSet:!1},ne=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.newPassword})),r=Object(b.g)().resetPasswordToken,n=Object(v.a)({initialValues:{password:"",repeatPassword:""},validate:function(e){var t={};return e.password?e.password.length<8&&(t.password="Password must be more than 7 characters"):t.password="Required",e.repeatPassword?e.password!==e.repeatPassword&&(t.repeatPassword="Passwords are not equal"):t.repeatPassword="Required",t},onSubmit:function(t){e(function(e,t){return function(r){D(e,t).then((function(e){r({type:"SET-NEW-PASSWORD",passwordIsSet:!0})})).catch((function(e){r(z("Error: "+e.response.data.error))}))}}(t.password,r)),n.resetForm()}});return t.passwordIsSet?Object(m.jsx)(b.a,{to:"/login"}):Object(m.jsx)("div",{children:Object(m.jsx)("form",{onSubmit:n.handleSubmit,children:Object(m.jsx)(w.a,{children:Object(m.jsxs)(P.a,{children:[Object(m.jsx)(S.a,Object(x.a)({type:"password",label:"Password",margin:"normal"},n.getFieldProps("password"))),n.touched.password&&n.errors.password?Object(m.jsx)("div",{style:{color:"red"},children:n.errors.password}):null,Object(m.jsx)(S.a,Object(x.a)({type:"password",label:"Repeat password",margin:"normal"},n.getFieldProps("repeatPassword"))),n.touched.repeatPassword&&n.errors.repeatPassword?Object(m.jsx)("div",{style:{color:"red"},children:n.errors.repeatPassword}):null,Object(m.jsx)(k.a,{type:"submit",variant:"contained",color:"primary",children:"Set new password"})]})})})})},ae={isSignUp:!1},ce=function(e){return{type:"SET-IS-SIGN-UP",value:e}},se=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.registration.isSignUp})),r=Object(v.a)({initialValues:{email:"",password:"",repeatPassword:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<8&&(t.password="Password must be more than 7 characters"):t.password="Required",e.repeatPassword?e.password!==e.repeatPassword&&(t.repeatPassword="Passwords are not equal"):t.repeatPassword="Required",t},onSubmit:function(t){var n,a;e((n=t.email,a=t.password,function(e){e(q("loading")),F(n,a).then((function(t){e(q("succeeded")),e(ce(!0))})).catch((function(t){e(q("failed")),e(z("Error: "+t.response.data.error))}))})),r.resetForm()}});return t?Object(m.jsx)(b.a,{to:"/login"}):Object(m.jsx)("div",{children:Object(m.jsx)("form",{onSubmit:r.handleSubmit,children:Object(m.jsx)(w.a,{children:Object(m.jsxs)(P.a,{children:[Object(m.jsx)(S.a,Object(x.a)({label:"Email",margin:"normal"},r.getFieldProps("email"))),r.touched.email&&r.errors.email?Object(m.jsx)("div",{style:{color:"red"},children:r.errors.email}):null,Object(m.jsx)(S.a,Object(x.a)({type:"password",label:"Password",margin:"normal"},r.getFieldProps("password"))),r.touched.password&&r.errors.password?Object(m.jsx)("div",{style:{color:"red"},children:r.errors.password}):null,Object(m.jsx)(S.a,Object(x.a)({type:"password",label:"Repeat password",margin:"normal"},r.getFieldProps("repeatPassword"))),r.touched.repeatPassword&&r.errors.repeatPassword?Object(m.jsx)("div",{style:{color:"red"},children:r.errors.repeatPassword}):null,Object(m.jsx)(k.a,{type:"submit",variant:"contained",color:"primary",children:"Sign up"})]})})})})},oe={packs:[],columns:[{id:1,name:"Name"},{id:2,name:"Amount of cards"},{id:3,name:"Grade"},{id:4,name:"Date of updates"}],page:1,pageCount:8,cardPacksTotalCount:8},ie=function(e,t){return function(r){r(q("loading")),r(ue(e)),M(e,t).then((function(e){r(q("succeeded")),r(de(e.data.cardPacks)),r(je(e.data.cardPacksTotalCount))})).catch((function(e){r(q("failed")),r(z("Error: "+e.response.data.error))}))}},le=function(e){return function(t){t(q("loading")),G(e).then((function(e){t(q("succeeded"))})).catch((function(e){t(q("failed")),t(z("Error: "+e.response.data.error))}))}},de=function(e){return{type:"SET-PACKS",packs:e}},ue=function(e){return{type:"SET-CURRENT-PAGE",currentPage:e}},je=function(e){return{type:"SET-PACKS-TOTAL-COUNT",cardPacksTotalCount:e}},be=r(100),pe=r(195),Oe=Object(l.a)({nav:{display:"flex",justifyContent:"center",marginBottom:"13px"},ul:{listStyle:"none",padding:0,margin:0,display:"flex",color:"black"}});function fe(e){var t=Oe(),r=Object(pe.a)({count:e.totalCount}).items;return Object(m.jsx)("nav",{className:t.nav,children:Object(m.jsx)("ul",{className:t.ul,children:r.map((function(t,r){var n=t.page,a=t.type,c=t.selected,s=Object(be.a)(t,["page","type","selected"]),o=null;return o="start-ellipsis"===a||"end-ellipsis"===a?"\u2026":"page"===a?Object(m.jsx)("button",Object(x.a)(Object(x.a)({type:"button",style:{fontWeight:c?"bold":void 0,fontSize:"20px",marginRight:"7px"}},s),{},{children:n})):Object(m.jsx)("button",Object(x.a)(Object(x.a)({type:"button",style:{fontSize:"20px",marginRight:"7px"}},s),{},{children:a})),Object(m.jsx)("li",{onClick:function(t){e.onPageChanged(n)},children:o},r)}))})})}var he=r(199),me=r(200),ge=r(192),xe=r(202),ve=r(203),we=r(198),Pe=r(196),Se=r(144),ye=r(201),Ee=r(197);function ke(){var e=Object(s.b)(),t=(Object(s.c)((function(e){return e.app.status})),Object(s.c)((function(e){return e.login.isLoggedIn}))),r=Object(s.c)((function(e){return e.packs.packs})),a=Object(s.c)((function(e){return e.packs.columns})),c=Object(s.c)((function(e){return e.packs.cardPacksTotalCount})),o=Object(s.c)((function(e){return e.packs.pageCount})),i=Object(s.c)((function(e){return e.packs.page})),l=Math.ceil(c/o);return Object(n.useEffect)((function(){e(ie(i,o))}),[]),t?Object(m.jsxs)(Pe.a,{component:Se.a,children:[Object(m.jsxs)(Ee.a,{children:[Object(m.jsx)(we.a,{children:Object(m.jsxs)(he.a,{children:[a.map((function(e){return Object(m.jsx)(me.a,{component:"th",style:{fontWeight:"bold"},children:e.name},e.id)})),Object(m.jsx)(me.a,{colSpan:2,children:Object(m.jsx)(k.a,{color:"primary",variant:"contained",onClick:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PROJECT-PACK";e(le(r)),e(ie(i,o))},children:"Add pack"})})]})}),Object(m.jsx)(ye.a,{children:r.map((function(e){return Object(m.jsxs)(he.a,{children:[Object(m.jsx)(me.a,{children:e.name}),Object(m.jsx)(me.a,{children:e.cardsCount}),Object(m.jsx)(me.a,{children:e.grade}),Object(m.jsx)(me.a,{children:e.updated}),Object(m.jsx)(me.a,{children:Object(m.jsx)(ge.a,{onClick:function(){return alert("edit")},children:Object(m.jsx)(xe.a,{color:"primary"})})}),Object(m.jsx)(me.a,{children:Object(m.jsx)(ge.a,{onClick:function(){return alert("delete")},children:Object(m.jsx)(ve.a,{color:"secondary"})})})]},e._id)}))})]}),Object(m.jsx)(fe,{totalCount:l,onPageChanged:function(t){e(ie(t,o))}})]}):Object(m.jsx)(b.a,{to:"/login"})}var Te={login:"/login",passwordRecovery:"/passwordRecovery",profile:"/profile",signUp:"/signUp",newPassword:"/newPassword",error:"/404",packs:"/packs"},Ce=function(){return Object(m.jsx)("div",{className:O.a.currentDisplay,children:Object(m.jsxs)(b.d,{children:[Object(m.jsx)(b.b,{exact:!0,path:"/",render:function(){return Object(m.jsx)(b.a,{to:Te.login})}}),Object(m.jsx)(b.b,{path:Te.login,render:function(){return Object(m.jsx)(V,{})}}),Object(m.jsx)(b.b,{exact:!0,path:Te.signUp,render:function(){return Object(m.jsx)(se,{})}}),Object(m.jsx)(b.b,{exact:!0,path:Te.profile,render:function(){return Object(m.jsx)(te,{})}}),Object(m.jsx)(b.b,{exact:!0,path:Te.packs,render:function(){return Object(m.jsx)(ke,{})}}),Object(m.jsx)(b.b,{exact:!0,path:Te.passwordRecovery,render:function(){return Object(m.jsx)(X,{})}}),Object(m.jsx)(b.b,{path:"".concat(Te.newPassword,"/:resetPasswordToken"),render:function(){return Object(m.jsx)(ne,{})}}),Object(m.jsx)(b.b,{path:Te.error,render:function(){return Object(m.jsx)(g,{})}}),Object(m.jsx)(b.a,{from:"*",to:Te.error})]})})},Re=Object(l.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper}}}));var Ie=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.login.isLoggedIn})),r=Object(n.useState)(""),a=Object(i.a)(r,2),c=a[0],l=a[1],b=Re(),p=function(e,t){l(t)};return t?Object(m.jsx)("div",{className:b.root,children:Object(m.jsx)(d.a,{position:"static",children:Object(m.jsxs)(u.a,{value:c,onChange:p,"aria-label":"header tabs",children:[Object(m.jsx)(j.a,{label:"profile",value:"/profile",component:o.b,to:Te.profile}),Object(m.jsx)(j.a,{label:"packs",value:"/packs",component:o.b,to:Te.packs}),Object(m.jsx)(j.a,{label:"logout",onClick:function(){e((function(e){e(q("loading")),_().then((function(t){e(q("succeeded")),e(K(!1)),e(B(null))})).catch((function(t){e(q("failed"));var r=t.response?t.response.data.error:t.message+", more details in the console";e(z("Error: "+r))}))}))}})]})})}):Object(m.jsx)("div",{className:b.root,children:Object(m.jsx)(d.a,{position:"static",children:Object(m.jsxs)(u.a,{value:c,onChange:p,"aria-label":"simple tabs example",children:[Object(m.jsx)(j.a,{label:"login",value:"/login",component:o.b,to:Te.login}),Object(m.jsx)(j.a,{label:"sign up",value:"/signUp",component:o.b,to:Te.signUp})]})})})},Ae=r(211),Ne=r(208);function _e(e){return Object(m.jsx)(Ne.a,Object(x.a)({elevation:6,variant:"filled"},e))}function Ue(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.app.error})),r=null!==t;return Object(m.jsx)(Ae.a,{open:r,autoHideDuration:6e3,onClose:function(t,r){"clickaway"!==r&&e(z(null))},children:Object(m.jsx)(_e,{severity:"error",children:t})})}var Fe=r.p+"static/media/preloader.9ca08101.gif",Le=r(97),De=r.n(Le),Me=function(){return Object(m.jsx)("div",{className:De.a.loader,children:Object(m.jsx)("img",{src:Fe,alt:"preloader"})})},Ge=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.app.isInitialized}));return Object(n.useEffect)((function(){e((function(e){e(q("loading")),U().then((function(t){t.data&&(e(q("succeeded")),e(B(t.data)),e(K(!0)))})).catch((function(t){e(q("failed"));var r=t.response?t.response.data.error:t.message+", more details in the console";e(z("Error: "+r))})).finally((function(){e({type:"APP/SET-IS-INITIALIZED",isInitialized:!0})}))}))}),[e]),t?Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(Ie,{}),Object(m.jsx)(Ue,{}),Object(m.jsx)(Ce,{})]}):Object(m.jsx)(Me,{})},Ze=(r(142),r(38)),qe=r(98),ze={},We=Object(Ze.c)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login/SET-USER-DATA":return Object(x.a)(Object(x.a)({},e),{},{data:t.data});case"login/SET-IS-LOGGED-IN":return Object(x.a)(Object(x.a)({},e),{},{isLoggedIn:t.value});default:return e}},registration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-IS-SIGN-UP":return Object(x.a)(Object(x.a)({},e),{},{isSignUp:t.value});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0;return t.type,e},passwordRecovery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FORGOT-PASSWORD-RESPONSE":return Object(x.a)(Object(x.a)({},e),{},{info:t.info});case"IS-MAIL-SENT":return Object(x.a)(Object(x.a)({},e),{},{isMailSent:t.isMailSent});default:return e}},newPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-NEW-PASSWORD":return Object(x.a)(Object(x.a)({},e),{},{passwordIsSet:t.passwordIsSet});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP/SET-STATUS":return Object(x.a)(Object(x.a)({},e),{},{status:t.status});case"APP/SET-ERROR":return Object(x.a)(Object(x.a)({},e),{},{error:t.error});case"APP/SET-IS-INITIALIZED":return Object(x.a)(Object(x.a)({},e),{},{isInitialized:t.isInitialized});default:return e}},packs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-PACKS":return Object(x.a)(Object(x.a)({},e),{},{packs:t.packs});case"SET-PACKS-TOTAL-COUNT":return Object(x.a)(Object(x.a)({},e),{},{cardPacksTotalCount:t.cardPacksTotalCount});case"SET-CURRENT-PAGE":return Object(x.a)(Object(x.a)({},e),{},{page:t.currentPage});default:return e}}}),Be=Object(Ze.d)(We,Object(Ze.a)(qe.a));window.store=Be,console.log(Be.getState());var Ke=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,214)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))};c.a.render(Object(m.jsx)(o.a,{children:Object(m.jsx)(s.a,{store:Be,children:Object(m.jsx)(Ge,{})})}),document.getElementById("root")),Ke()},66:function(e,t,r){e.exports={loginFormContainer:"Login_loginFormContainer__2aD1U",forgetPasswordContainer:"Login_forgetPasswordContainer__2P8CS"}},86:function(e,t,r){e.exports={currentDisplay:"Routes_currentDisplay__1z_mw"}},87:function(e,t,r){e.exports={error404:"Error404_error404__3GaOV"}},95:function(e,t,r){e.exports={sentMailResponse:"PasswordRecovery_sentMailResponse__1B0QB"}},96:function(e,t,r){e.exports={profile:"Profile_profile__27UMu"}},97:function(e,t,r){e.exports={loader:"Preloader_loader__2rl41"}}},[[143,1,2]]]);
//# sourceMappingURL=main.54ef586b.chunk.js.map