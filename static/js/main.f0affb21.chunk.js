(this["webpackJsonpfriday-cards-project"]=this["webpackJsonpfriday-cards-project"]||[]).push([[0],{105:function(e,a,t){e.exports={currentDisplay:"Routes_currentDisplay__2rDE9"}},106:function(e,a,t){e.exports={error404:"Error404_error404__2oog_"}},110:function(e,a,t){e.exports={loader:"Preloader_loader__1jVOj"}},115:function(e,a,t){e.exports={sentMailResponse:"PasswordRecovery_sentMailResponse__3Ih3w"}},143:function(e,a,t){},168:function(e,a,t){},169:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),c=t(13),o=t.n(c),s=t(9),i=t(18),l=(t(143),t(33)),d=t(217),u=t(226),j=t(229),b=t(227),p=t(16),O=t(105),f=t.n(O),g=t(106),h=t.n(g),m=t(2),x=function(){return Object(m.jsxs)("div",{className:h.a.error404,children:[Object(m.jsx)("div",{children:"404"}),Object(m.jsx)("div",{children:"Page not found!"}),Object(m.jsx)("div",{children:"\u2014 \u0e05/\u1420. \u032b  .\u141f\\\u0e05\u2014"})]})},v=t(7),w=t(39),C=t(212),S=t(213),P=t(228),y=t(235),k=t(232),_=t(216),R=t(86),N=t.n(R),T=t(109),E=t.n(T).a.create({baseURL:"https://neko-back.herokuapp.com/2.0",withCredentials:!0}),I={email:"",from:"test-front-admin <ai73a@yandex.by>",message:"<div style=\"background-color: lime; padding: 15px\">password recovery link: \n              <a href='http://localhost:3000/friday-cards-project#/newPassword/$token$'>link</a></div>"},A=function(e){return E.post("auth/login",e)},D=function(){return E.delete("auth/me",{})},M=function(){return E.post("auth/me",{})},U=function(e,a){return E.post("auth/register",{email:e,password:a})},H=function(e){return E.post("auth/forgot",Object(v.a)(Object(v.a)({},I),{},{email:e}))},L=function(e,a){return E.post("auth/set-new-password",{password:e,resetPasswordToken:a})},J=function(e,a,t,r,n){return n?E.get("cards/pack?page=".concat(e,"&pageCount=").concat(a,"&sortPacks=").concat(t,"&packName=").concat(r,"&user_id=").concat(n)):E.get("cards/pack?page=".concat(e,"&pageCount=").concat(a,"&sortPacks=").concat(t,"&packName=").concat(r))},F=function(){return E.post("cards/pack",{cardsPack:{name:"PROJECT-CARD"}})},G=function(e){return E.delete("cards/pack?id=".concat(e))},q=function(e){return E.put("cards/pack",{cardsPack:{_id:e,name:"NEW-PACK-NAME"}})},W=function(e,a,t,r){return E.get("cards/card?cardsPack_id=".concat(t,"&page=").concat(e,"&pageCount=").concat(a,"&sortCards=").concat(r))},Z=function(e){return E.post("cards/card",{card:{cardsPack_id:e,question:"CARD-QUESTION",answer:"CARD-ANSWER"}})},V=function(e){return E.delete("cards/card?id=".concat(e))},z=function(e){return E.put("cards/card",{card:{_id:e,question:"NEW-CARD-QUESTION",answer:"NEW-CARD-ANSWER"}})},K={status:"idle",error:null,isInitialized:!1},Q=function(e){return{type:"APP/SET-STATUS",status:e}},B=function(e){return{type:"APP/SET-ERROR",error:e}},$={data:null,isLoggedIn:!1},Y=function(e){return{type:"login/SET-USER-DATA",data:e}},X=function(e){return{type:"login/SET-IS-LOGGED-IN",value:e}},ee=t(110),ae=t.n(ee),te=t(208),re=function(){return Object(m.jsx)("div",{className:ae.a.loader,children:Object(m.jsx)(te.a,{})})},ne=function(){var e=Object(s.b)(),a=Object(s.c)((function(e){return e.login.isLoggedIn})),t=Object(s.c)((function(e){return e.app.status})),r=Object(w.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(e){var a={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(a.email="Invalid email address"):a.email="Required",e.password?e.password.length<8&&(a.password="Invalid password"):a.password="Required",a},onSubmit:function(a){var t;e((t=a,function(e){e(Q("loading")),A(t).then((function(a){e(Q("succeeded")),e(X(!0)),e(Y(a.data))})).catch((function(a){e(Q("failed"));var t=a.response?a.response.data.error:a.message+", more details in the console";e(B("Error: "+t))}))})),r.resetForm()}});return"loading"===t?Object(m.jsx)(re,{}):a?Object(m.jsx)(p.a,{to:"/profile"}):Object(m.jsxs)("div",{className:N.a.loginFormContainer,children:[Object(m.jsx)("form",{onSubmit:r.handleSubmit,children:Object(m.jsx)(C.a,{children:Object(m.jsxs)(S.a,{children:[Object(m.jsx)(P.a,Object(v.a)({label:"Email",margin:"normal"},r.getFieldProps("email"))),r.touched.email&&r.errors.email?Object(m.jsx)("div",{style:{color:"red"},children:r.errors.email}):null,Object(m.jsx)(P.a,Object(v.a)({type:"password",label:"Password",margin:"normal"},r.getFieldProps("password"))),r.touched.password&&r.errors.password?Object(m.jsx)("div",{style:{color:"red"},children:r.errors.password}):null,Object(m.jsx)(y.a,{label:"Remember me",control:Object(m.jsx)(k.a,{onChange:r.handleChange,checked:r.values.rememberMe,name:"rememberMe"})}),Object(m.jsx)(_.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})})}),Object(m.jsx)("div",{className:N.a.forgetPasswordContainer,children:Object(m.jsx)(i.c,{to:fa.passwordRecovery,children:"Forgot password"})})]})},ce=t(115),oe=t.n(ce),se={info:"",isMailSent:!1},ie=function(e){return{type:"IS-MAIL-SENT",isMailSent:e}},le=function(){var e=Object(s.b)(),a=Object(s.c)((function(e){return e.passwordRecovery})),t=Object(w.a)({initialValues:{email:""},validate:function(e){var a={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(a.email="Invalid email address"):a.email="Required",a},onSubmit:function(a){var r;e((r=a.email,function(e){e(Q("loading")),H(r).then((function(a){e({type:"FORGOT-PASSWORD-RESPONSE",info:a.data.info}),e(ie(!0)),e(Q("succeeded"))})).catch((function(a){e(Q("failed")),e(B("Error: "+a.response.data.error)),e(ie(!1))}))})),t.resetForm()}});return Object(m.jsx)("div",{children:a.isMailSent?Object(m.jsx)("div",{className:oe.a.sentMailResponse,children:"the recovery link has been sent on your email"}):Object(m.jsx)("form",{onSubmit:t.handleSubmit,children:Object(m.jsx)(C.a,{children:Object(m.jsxs)(S.a,{children:[Object(m.jsx)(P.a,Object(v.a)({label:"Email",margin:"normal"},t.getFieldProps("email"))),t.touched.email&&t.errors.email?Object(m.jsx)("div",{style:{color:"red"},children:t.errors.email}):null,Object(m.jsx)(_.a,{type:"submit",variant:"contained",color:"primary",children:"Send recovery-link"})]})})})})},de=t(75),ue=t.n(de),je=function(){var e=Object(s.c)((function(e){return e.login.isLoggedIn})),a=Object(s.c)((function(e){return e.login.data}));return e?Object(m.jsx)("div",{className:ue.a.profile,children:a&&Object(m.jsxs)("div",{className:ue.a.containerProfile,children:[Object(m.jsxs)("span",{children:["User name: ",a.name]}),Object(m.jsxs)("span",{children:["User email: ",a.email]}),Object(m.jsx)("div",{className:ue.a.avatarContainer,children:Object(m.jsx)("img",{src:a.avatar,alt:"avatar"})})]})}):Object(m.jsx)(p.a,{to:"/login"})},be={passwordIsSet:!1},pe=function(){var e=Object(s.b)(),a=Object(s.c)((function(e){return e.newPassword})),t=Object(p.i)().resetPasswordToken,r=Object(w.a)({initialValues:{password:"",repeatPassword:""},validate:function(e){var a={};return e.password?e.password.length<8&&(a.password="Password must be more than 7 characters"):a.password="Required",e.repeatPassword?e.password!==e.repeatPassword&&(a.repeatPassword="Passwords are not equal"):a.repeatPassword="Required",a},onSubmit:function(a){e(function(e,a){return function(t){L(e,a).then((function(e){t({type:"SET-NEW-PASSWORD",passwordIsSet:!0})})).catch((function(e){t(B("Error: "+e.response.data.error))}))}}(a.password,t)),r.resetForm()}});return a.passwordIsSet?Object(m.jsx)(p.a,{to:"/login"}):Object(m.jsx)("div",{children:Object(m.jsx)("form",{onSubmit:r.handleSubmit,children:Object(m.jsx)(C.a,{children:Object(m.jsxs)(S.a,{children:[Object(m.jsx)(P.a,Object(v.a)({type:"password",label:"Password",margin:"normal"},r.getFieldProps("password"))),r.touched.password&&r.errors.password?Object(m.jsx)("div",{style:{color:"red"},children:r.errors.password}):null,Object(m.jsx)(P.a,Object(v.a)({type:"password",label:"Repeat password",margin:"normal"},r.getFieldProps("repeatPassword"))),r.touched.repeatPassword&&r.errors.repeatPassword?Object(m.jsx)("div",{style:{color:"red"},children:r.errors.repeatPassword}):null,Object(m.jsx)(_.a,{type:"submit",variant:"contained",color:"primary",children:"Set new password"})]})})})})},Oe={isSignUp:!1},fe=function(e){return{type:"SET-IS-SIGN-UP",value:e}},ge=function(){var e=Object(s.b)(),a=Object(s.c)((function(e){return e.registration.isSignUp})),t=Object(w.a)({initialValues:{email:"",password:"",repeatPassword:""},validate:function(e){var a={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(a.email="Invalid email address"):a.email="Required",e.password?e.password.length<8&&(a.password="Password must be more than 7 characters"):a.password="Required",e.repeatPassword?e.password!==e.repeatPassword&&(a.repeatPassword="Passwords are not equal"):a.repeatPassword="Required",a},onSubmit:function(a){var r,n;e((r=a.email,n=a.password,function(e){e(Q("loading")),U(r,n).then((function(a){e(Q("succeeded")),e(fe(!0))})).catch((function(a){e(Q("failed")),e(B("Error: "+a.response.data.error))}))})),t.resetForm()}});return a?Object(m.jsx)(p.a,{to:"/login"}):Object(m.jsx)("div",{children:Object(m.jsx)("form",{onSubmit:t.handleSubmit,children:Object(m.jsx)(C.a,{children:Object(m.jsxs)(S.a,{children:[Object(m.jsx)(P.a,Object(v.a)({label:"Email",margin:"normal"},t.getFieldProps("email"))),t.touched.email&&t.errors.email?Object(m.jsx)("div",{style:{color:"red"},children:t.errors.email}):null,Object(m.jsx)(P.a,Object(v.a)({type:"password",label:"Password",margin:"normal"},t.getFieldProps("password"))),t.touched.password&&t.errors.password?Object(m.jsx)("div",{style:{color:"red"},children:t.errors.password}):null,Object(m.jsx)(P.a,Object(v.a)({type:"password",label:"Repeat password",margin:"normal"},t.getFieldProps("repeatPassword"))),t.touched.repeatPassword&&t.errors.repeatPassword?Object(m.jsx)("div",{style:{color:"red"},children:t.errors.repeatPassword}):null,Object(m.jsx)(_.a,{type:"submit",variant:"contained",color:"primary",children:"Sign up"})]})})})})},he={packs:[],columns:[{id:1,name:"Name"},{id:2,name:"Amount of cards"},{id:3,name:"Grade"},{id:4,name:"Date of updates"}],page:1,pageCount:6,cardPacksTotalCount:10},me=function(e,a,t,r,n){return function(c){c(Q("loading")),e&&c(Se(e)),J(e,a,t,r,n).then((function(e){c(Q("succeeded")),c(Ce(e.data.cardPacks)),c(Pe(e.data.cardPacksTotalCount))})).catch((function(e){c(Q("failed")),c(B("Error: "+e.response.data.error))}))}},xe=function(e,a,t){return function(r,n){r(Q("loading"));var c=n().packs,o=c.page,s=c.pageCount;F().then((function(n){r(Q("succeeded")),r(me(o,s,e,a,t))})).catch((function(e){r(Q("failed")),r(B("Error: "+e.response.data.error))}))}},ve=function(e,a,t,r){return function(n,c){n(Q("loading"));var o=c().packs,s=o.page,i=o.pageCount;G(e).then((function(e){n(Q("succeeded")),n(me(s,i,a,t,r))})).catch((function(e){n(Q("failed")),n(B("Error: "+e.response.data.error))}))}},we=function(e,a,t,r){return function(n,c){n(Q("loading"));var o=c().packs,s=o.page,i=o.pageCount;q(e).then((function(e){n(Q("succeeded")),n(me(s,i,a,t,r))})).catch((function(e){n(Q("failed")),n(B("Error: "+e.response.data.error))}))}},Ce=function(e){return{type:"SET-PACKS",packs:e}},Se=function(e){return{type:"SET-CURRENT-PAGE",currentPage:e}},Pe=function(e){return{type:"SET-PACKS-TOTAL-COUNT",cardPacksTotalCount:e}},ye=t(118),ke=t(218),_e=Object(d.a)({nav:{display:"flex",justifyContent:"center",marginBottom:"13px"},ul:{listStyle:"none",padding:0,margin:0,display:"flex",color:"black"}});function Re(e){var a=_e(),t=Object(ke.a)({count:e.totalCount}).items;return Object(m.jsx)("nav",{className:a.nav,children:Object(m.jsx)("ul",{className:a.ul,children:t.map((function(a,t){var r=a.page,n=a.type,c=a.selected,o=Object(ye.a)(a,["page","type","selected"]),s=null;if("start-ellipsis"===n||"end-ellipsis"===n)s="\u2026";else if("page"===n)s=Object(m.jsx)(i.b,Object(v.a)(Object(v.a)({to:"/packs?page=".concat(r),style:{fontWeight:c?"bold":void 0,fontSize:"20px",marginRight:"7px"}},o),{},{children:r}));else{var l="next"===n?1:-1,d=Math.max(1,Math.min(r+l,e.totalCount));s=Object(m.jsx)(i.b,Object(v.a)(Object(v.a)({to:"/packs?page=".concat(d),style:{fontSize:"20px",marginRight:"7px"}},o),{},{children:n}))}return Object(m.jsx)("li",{onClick:function(a){e.onPageChanged(r)},children:s},t)}))})})}var Ne=t(220),Te=t(221),Ee=t(48),Ie=t.n(Ee),Ae=t(73),De=t.n(Ae),Me=t(234),Ue=t(231),He=t(219),Le=t(171),Je=t(116),Fe=t.n(Je),Ge=t(215),qe=Object(d.a)((function(e){return Object(Me.a)({modal:{display:"flex",alignItems:"center",justifyContent:"space-between"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),display:"flex",flexDirection:"column",alignItems:"center"}})})),We=Object(d.a)((function(e){return Object(Me.a)({button:{margin:e.spacing(1)}})}));function Ze(e){var a=qe(),t=We(),r=n.a.useState(!1),c=Object(l.a)(r,2),o=c[0],i=c[1],d=Object(s.c)((function(e){var a;return null===(a=e.login.data)||void 0===a?void 0:a._id})),u=e.cardID,j=e.user_id,b=e.text,p=e.startIcon,O=e.color,f=function(){i(!1)};return Object(m.jsxs)("div",{children:[Object(m.jsx)(Ge.a,{onClick:function(){i(!0)},disabled:d!==j,children:p}),Object(m.jsx)(Ue.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:a.modal,open:o,onClose:f,closeAfterTransition:!0,BackdropComponent:He.a,BackdropProps:{timeout:500},children:Object(m.jsx)(Le.a,{in:o,children:Object(m.jsxs)("div",{className:a.paper,children:[Object(m.jsx)("h2",{id:"transition-modal-title",children:b}),Object(m.jsxs)("div",{children:[Object(m.jsx)(_.a,{onClick:function(){u&&e.onClickHandler(u),f()},disabled:d!==j,startIcon:p,variant:"contained",className:t.button,children:" yes "}),Object(m.jsx)(_.a,{onClick:f,disabled:d!==j,startIcon:Object(m.jsx)(Fe.a,{color:O}),variant:"contained"})]})]})})})]})}var Ve=t(72),ze=t.n(Ve);function Ke(e){var a=Object(s.c)((function(e){var a;return null===(a=e.login.data)||void 0===a?void 0:a._id})),t=e.id,r=e.name,n=e.cardsCount,c=e.grade,o=e.updated,l=e.user_id,d=new Date(o),u=d.getFullYear(),j=d.getMonth()+1<10?"0".concat(d.getMonth()+1):d.getMonth()+1,b=d.getDate()<10?"0".concat(d.getDate()):d.getDate(),p=d.getHours()<10?"0".concat(d.getHours()):d.getHours(),O=d.getMinutes()<10?"0".concat(d.getMinutes()):d.getMinutes(),f="".concat(b,"-").concat(j,"-").concat(u),g="".concat(p,":").concat(O);return Object(m.jsxs)(Ne.a,{className:Ie.a.tablePackRow,children:[Object(m.jsx)(Te.a,{className:Ie.a.tableRowCellName,children:r}),Object(m.jsx)(Te.a,{className:Ie.a.tableRowCellCardsCount,align:"center",children:n}),Object(m.jsx)(Te.a,{className:Ie.a.tableRowCellGrade,align:"center",children:c}),Object(m.jsxs)(Te.a,{className:Ie.a.tableRowCellUpdated,align:"center",children:[f,Object(m.jsx)("br",{}),g]}),Object(m.jsx)(Te.a,{children:Object(m.jsx)(Ze,{onClickHandler:function(){e.updatePack(t)},user_id:l,text:"Update pack?",startIcon:Object(m.jsx)(ze.a,{color:a!==l?"disabled":"primary"}),color:a!==l?"disabled":"primary"})}),Object(m.jsx)(Te.a,{children:Object(m.jsx)(Ze,{onClickHandler:function(){e.deletePack(t)},user_id:l,text:"Are you sure you want to delete this pack?",color:a!==l?"disabled":"primary",startIcon:Object(m.jsx)(De.a,{color:a!==l?"disabled":"primary"})})}),Object(m.jsx)(Te.a,{className:Ie.a.tableRowCellCardsLink,children:Object(m.jsx)(i.c,{to:"/cards/"+t,children:"Cards"})})]})}var Qe=t(224),Be=t(222),$e=t(170),Ye=t(225),Xe=t(223),ea=t(236),aa=t(49),ta=t.n(aa);function ra(){var e=Object(s.b)(),a=Object(s.c)((function(e){return e.login.isLoggedIn})),t=Object(s.c)((function(e){var a;return null===(a=e.login.data)||void 0===a?void 0:a._id})),n=Object(s.c)((function(e){return e.packs.packs})),c=Object(s.c)((function(e){return e.packs.columns})),o=Object(s.c)((function(e){return e.packs.cardPacksTotalCount})),i=Object(s.c)((function(e){return e.packs.pageCount})),d=Object(s.c)((function(e){return e.packs.page})),u=Math.ceil(o/i),j=!!localStorage.myPacksShowValue&&JSON.parse(localStorage.myPacksShowValue),b=localStorage.sortProperty?JSON.parse(localStorage.sortProperty):"",O=localStorage.filterProperty?JSON.parse(localStorage.filterProperty):"",f=Object(r.useState)(j),g=Object(l.a)(f,2),h=g[0],x=g[1],v=Object(r.useState)(b),w=Object(l.a)(v,2),C=w[0],S=w[1],y=Object(r.useState)(O),R=Object(l.a)(y,2),N=R[0],T=R[1],E=(Object(p.g)(),function(a){h?t&&e(ve(a,C,N,t)):e(ve(a,C,N))}),I=function(a){h?t&&e(we(a,C,N,t)):e(we(a,C,N))},A=function(){localStorage.setItem("sortProperty",JSON.stringify("1name"));var a=JSON.parse(localStorage.sortProperty);S(a),h?t&&e(me(d,i,a,N,t)):e(me(d,i,a,N))},D=function(){localStorage.setItem("sortProperty",JSON.stringify("0name"));var a=JSON.parse(localStorage.sortProperty);S(a),h?t&&e(me(d,i,a,N,t)):e(me(d,i,a,N))},M=function(){localStorage.setItem("sortProperty",JSON.stringify("1cardsCount"));var a=JSON.parse(localStorage.sortProperty);S(a),h?t&&e(me(d,i,a,N,t)):e(me(d,i,a,N))},U=function(){localStorage.setItem("sortProperty",JSON.stringify("0cardsCount"));var a=JSON.parse(localStorage.sortProperty);S(a),h?t&&e(me(d,i,a,N,t)):e(me(d,i,a,N))},H=function(){localStorage.setItem("sortProperty",JSON.stringify("1grade"));var a=JSON.parse(localStorage.sortProperty);S(a),h?t&&e(me(d,i,a,N,t)):e(me(d,i,a,N))},L=function(){localStorage.setItem("sortProperty",JSON.stringify("0grade"));var a=JSON.parse(localStorage.sortProperty);S(a),h?t&&e(me(d,i,a,N,t)):e(me(d,i,a,N))};var J=new URLSearchParams(Object(p.h)().search);return Object(r.useEffect)((function(){var a=+J.get("page");h?t&&e(me(a,i,C,N,t)):e(me(a,i,C,N))}),[]),a?Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{className:ta.a.packsHeader,children:"PACKS OF CARDS"}),Object(m.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(m.jsx)(P.a,{label:"Search packs by name",style:{marginRight:"30px"},value:N,onChange:function(a){localStorage.setItem("filterProperty",JSON.stringify(a.currentTarget.value));var r=JSON.parse(localStorage.filterProperty);T(r),h?t&&e(me(d,i,C,r,t)):e(me(d,i,C,r))}})}),Object(m.jsxs)("div",{children:[Object(m.jsx)(k.a,{checked:h,onChange:function(a){localStorage.setItem("myPacksShowValue",JSON.stringify(a.currentTarget.checked));var r=JSON.parse(localStorage.myPacksShowValue);x(r),r?t&&e(me(d,i,C,N,t)):e(me(d,i,N,C))},color:"primary"}),Object(m.jsx)("span",{className:ta.a.showMyPacksTitle,children:"My packs"})]}),Object(m.jsxs)(Be.a,{component:$e.a,className:ta.a.packsTable,children:[Object(m.jsxs)(Xe.a,{children:[Object(m.jsx)(Qe.a,{className:ta.a.packsTableHead,children:Object(m.jsxs)(Ne.a,{className:ta.a.packsTableHeadColumnRow,children:[c.map((function(e){return Object(m.jsxs)(Te.a,{align:"center",className:ta.a.cell,children:[e.name,"Name"===e.name&&Object(m.jsxs)("div",{children:[Object(m.jsx)(ea.a,{active:!0,direction:"asc",onClick:A}),Object(m.jsx)(ea.a,{active:!0,direction:"desc",onClick:D})]}),"Amount of cards"===e.name&&Object(m.jsxs)("div",{children:[Object(m.jsx)(ea.a,{active:!0,direction:"asc",onClick:M}),Object(m.jsx)(ea.a,{active:!0,direction:"desc",onClick:U})]}),"Grade"===e.name&&Object(m.jsxs)("div",{children:[Object(m.jsx)(ea.a,{active:!0,direction:"asc",onClick:H}),Object(m.jsx)(ea.a,{active:!0,direction:"desc",onClick:L})]})]},e.id)})),Object(m.jsx)(Te.a,{colSpan:3,align:"center",children:Object(m.jsx)(_.a,{color:"primary",variant:"contained",onClick:function(){h?t&&e(xe(C,N,t)):e(xe(C,N))},children:"Add pack"})})]})}),Object(m.jsx)(Ye.a,{children:n.map((function(e){return Object(m.jsx)(Ke,{id:e._id,user_id:e.user_id,name:e.name,cardsCount:e.cardsCount,grade:e.grade,updated:e.updated,deletePack:E,updatePack:I},e._id)}))})]}),Object(m.jsx)(Re,{totalCount:u,onPageChanged:function(a){h?t&&e(me(a,i,C,N,t)):e(me(a,i,C,N))}})]})]}):Object(m.jsx)(p.a,{to:"/login"})}var na=t(63),ca={cards:{},columns:[{id:1,name:"Question"},{id:2,name:"Answer"},{id:3,name:"Grade"},{id:4,name:"Updated"}],page:1,pageCount:6,cardsTotalCount:10},oa=function(e,a,t,r){return function(n){n(Q("loading")),n(ia(e)),W(e,a,t,r).then((function(e){n(Q("succeeded")),n(sa(e.data.cards,t)),n(la(e.data.cardsTotalCount))})).catch((function(e){n(Q("failed")),n(B("Error: "+e.response.data.error))}))}},sa=function(e,a){return{type:"SET-CARDS",cards:e,packID:a}},ia=function(e){return{type:"SET-CURRENT-PAGE",currentPage:e}},la=function(e){return{type:"SET-CARDS-TOTAL-COUNT",cardsTotalCount:e}},da=t(54),ua=t.n(da);function ja(e){var a=Object(s.c)((function(e){var a;return null===(a=e.login.data)||void 0===a?void 0:a._id})),t=e.cardID,r=e.question,n=e.answer,c=e.grade,o=e.updated,i=e.user_id,l=new Date(o),d=l.getFullYear(),u=l.getMonth()+1<10?"0".concat(l.getMonth()+1):l.getMonth()+1,j=l.getDate()<10?"0".concat(l.getDate()):l.getDate(),b=l.getHours()<10?"0".concat(l.getHours()):l.getHours(),p=l.getMinutes()<10?"0".concat(l.getMinutes()):l.getMinutes(),O="".concat(j,"-").concat(u,"-").concat(d),f="".concat(b,":").concat(p);return Object(m.jsxs)(Ne.a,{className:ua.a.tableCardRow,children:[Object(m.jsx)(Te.a,{className:ua.a.tableRowCellQuestion,children:r}),Object(m.jsx)(Te.a,{className:ua.a.tableRowCellAnswer,children:n}),Object(m.jsx)(Te.a,{className:ua.a.tableRowCellGrade,align:"center",children:c}),Object(m.jsxs)(Te.a,{className:ua.a.tableRowCellUpdated,align:"center",children:[O,Object(m.jsx)("br",{}),f]}),Object(m.jsx)(Te.a,{children:Object(m.jsx)(Ze,{cardID:t,onClickHandler:function(){e.updateCard(t)},user_id:i,text:"Update card?",startIcon:Object(m.jsx)(ze.a,{color:a!==i?"disabled":"secondary"}),color:a!==i?"disabled":"secondary"})}),Object(m.jsx)(Te.a,{children:Object(m.jsx)(Ze,{cardID:t,onClickHandler:function(){e.deleteCard(t)},user_id:i,text:"Are you sure you want to delete this card?",startIcon:Object(m.jsx)(De.a,{color:a!==i?"disabled":"secondary"}),color:a!==i?"disabled":"secondary"})})]})}var ba=t(55),pa=t.n(ba);function Oa(){var e=Object(s.b)(),a=Object(s.c)((function(e){return e.login.isLoggedIn})),t=Object(s.c)((function(e){return e.cards.cards})),n=Object(s.c)((function(e){return e.cards.columns})),c=Object(s.c)((function(e){return e.cards.cardsTotalCount})),o=Object(s.c)((function(e){return e.cards.pageCount})),i=Object(s.c)((function(e){return e.cards.page})),d=Math.ceil(c/o),u=Object(p.j)("/cards/:id"),j=null===u||void 0===u?void 0:u.params.id,b=j&&t[j],O=localStorage.sortPropertyCards?JSON.parse(localStorage.sortPropertyCards):"",f=Object(r.useState)(O),g=Object(l.a)(f,2),h=g[0],x=g[1],v=function(a){j&&e(function(e,a){return function(t,r){t(Q("loading"));var n=r().cards,c=n.page,o=n.pageCount;V(e).then((function(e){t(Q("succeeded")),t(oa(c,o,a))})).catch((function(e){t(Q("failed")),t(B("Error: "+e.response.data.error))}))}}(a,j))},w=function(a){j&&e(function(e,a){return function(t,r){t(Q("loading"));var n=r().packs,c=n.page,o=n.pageCount;z(e).then((function(e){t(Q("succeeded")),t(oa(c,o,a))})).catch((function(e){t(Q("failed")),t(B("Error: "+e.response.data.error))}))}}(a,j))},C=function(){localStorage.setItem("sortPropertyCards",JSON.stringify("1grade"));var a=JSON.parse(localStorage.sortPropertyCards);x(a),j&&e(oa(i,o,j,a))},S=function(){localStorage.setItem("sortPropertyCards",JSON.stringify("0grade"));var a=JSON.parse(localStorage.sortPropertyCards);x(a),j&&e(oa(i,o,j,a))};return Object(r.useEffect)((function(){j&&e(oa(i,o,j,h))}),[]),a?Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{className:pa.a.cardsHeader,children:"CARDS"}),Object(m.jsxs)(Be.a,{component:$e.a,className:pa.a.cardsTable,children:[Object(m.jsxs)(Xe.a,{children:[Object(m.jsx)(Qe.a,{className:pa.a.cardsTableHead,children:Object(m.jsxs)(Ne.a,{className:pa.a.cardsTableHeadColumnRow,children:[n.map((function(e){return Object(m.jsxs)(Te.a,{component:"th",align:"center",className:pa.a.cell,children:[e.name,"Grade"===e.name&&Object(m.jsxs)("div",{children:[Object(m.jsx)(ea.a,{active:!0,direction:"asc",onClick:C}),Object(m.jsx)(ea.a,{active:!0,direction:"desc",onClick:S})]})]},e.id)})),Object(m.jsx)(Te.a,{colSpan:2,align:"center",children:Object(m.jsx)(_.a,{color:"secondary",variant:"contained",onClick:function(){j&&e(function(e){return function(a,t){a(Q("loading"));var r=t().cards,n=r.page,c=r.pageCount;Z(e).then((function(t){a(Q("succeeded")),a(oa(n,c,e))})).catch((function(e){a(Q("failed")),a(B("Error: "+e.response.data.error))}))}}(j))},children:"Add card"})})]})}),Object(m.jsx)(Ye.a,{children:b&&b.map((function(e){return Object(m.jsx)(ja,{cardID:e._id,user_id:e.user_id,question:e.question,answer:e.answer,grade:e.grade,updated:e.updated,deleteCard:v,updateCard:w},e._id)}))})]}),Object(m.jsx)(Re,{totalCount:d,onPageChanged:function(a){j&&e(oa(a,o,j))}})]})]}):Object(m.jsx)(p.a,{to:"/login"})}var fa={login:"/login",passwordRecovery:"/passwordRecovery",profile:"/profile",signUp:"/signUp",newPassword:"/newPassword",error:"/404",packs:"/packs",cards:"/cards"},ga=function(){return Object(m.jsx)("div",{className:f.a.currentDisplay,children:Object(m.jsxs)(p.d,{children:[Object(m.jsx)(p.b,{exact:!0,path:"/",render:function(){return Object(m.jsx)(p.a,{to:fa.login})}}),Object(m.jsx)(p.b,{path:fa.login,render:function(){return Object(m.jsx)(ne,{})}}),Object(m.jsx)(p.b,{exact:!0,path:fa.signUp,render:function(){return Object(m.jsx)(ge,{})}}),Object(m.jsx)(p.b,{exact:!0,path:fa.profile,render:function(){return Object(m.jsx)(je,{})}}),Object(m.jsx)(p.b,{exact:!0,path:fa.packs,render:function(){return Object(m.jsx)(ra,{})}}),Object(m.jsx)(p.b,{exact:!0,path:"".concat(fa.cards,"/:id"),render:function(){return Object(m.jsx)(Oa,{})}}),Object(m.jsx)(p.b,{exact:!0,path:fa.passwordRecovery,render:function(){return Object(m.jsx)(le,{})}}),Object(m.jsx)(p.b,{path:"".concat(fa.newPassword,"/:resetPasswordToken"),render:function(){return Object(m.jsx)(pe,{})}}),Object(m.jsx)(p.b,{path:fa.error,render:function(){return Object(m.jsx)(x,{})}}),Object(m.jsx)(p.a,{from:"*",to:fa.error})]})})},ha=Object(d.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper}}}));var ma=function(){var e=Object(s.b)(),a=Object(s.c)((function(e){return e.login.isLoggedIn})),t=Object(r.useState)(""),n=Object(l.a)(t,2),c=n[0],o=n[1],d=ha(),p=function(e,a){o(a)};return a?Object(m.jsx)("div",{className:d.root,children:Object(m.jsx)(u.a,{position:"static",children:Object(m.jsxs)(j.a,{value:c,onChange:p,"aria-label":"header tabs",children:[Object(m.jsx)(b.a,{label:"profile",value:"/profile",component:i.b,to:fa.profile}),Object(m.jsx)(b.a,{label:"packs",value:"/packs",component:i.b,to:fa.packs}),Object(m.jsx)(b.a,{label:"logout",onClick:function(){e((function(e){e(Q("loading")),D().then((function(a){e(Q("succeeded")),e(X(!1)),e(Y(null)),localStorage.clear()})).catch((function(a){e(Q("failed"));var t=a.response?a.response.data.error:a.message+", more details in the console";e(B("Error: "+t))}))}))}})]})})}):Object(m.jsx)("div",{className:d.root,children:Object(m.jsx)(u.a,{position:"static",children:Object(m.jsxs)(j.a,{value:c,onChange:p,"aria-label":"simple tabs example",children:[Object(m.jsx)(b.a,{label:"login",value:"/login",component:i.b,to:fa.login}),Object(m.jsx)(b.a,{label:"sign up",value:"/signUp",component:i.b,to:fa.signUp})]})})})},xa=t(233),va=t(230);function wa(e){return Object(m.jsx)(va.a,Object(v.a)({elevation:6,variant:"filled"},e))}function Ca(){var e=Object(s.b)(),a=Object(s.c)((function(e){return e.app.error})),t=null!==a;return Object(m.jsx)(xa.a,{open:t,autoHideDuration:6e3,onClose:function(a,t){"clickaway"!==t&&e(B(null))},children:Object(m.jsx)(wa,{severity:"error",children:a})})}var Sa=function(){var e=Object(s.b)(),a=Object(s.c)((function(e){return e.login.data})),t=Object(s.c)((function(e){return e.app.isInitialized}));return Object(r.useEffect)((function(){!a&&e((function(e){e(Q("loading")),M().then((function(a){e(Q("succeeded")),e(Y(a.data)),e(X(!0))})).catch((function(a){e(Q("failed"));var t=a.response?a.response.data.error:a.message+", more details in the console";e(B("Error: "+t))})).finally((function(){e({type:"APP/SET-IS-INITIALIZED",isInitialized:!0})}))}))}),[e,a]),t?Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(ma,{}),Object(m.jsx)(Ca,{}),Object(m.jsx)(ga,{})]}):Object(m.jsx)(re,{})},Pa=(t(168),t(45)),ya=t(117),ka={},_a=Object(Pa.c)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"login/SET-USER-DATA":return Object(v.a)(Object(v.a)({},e),{},{data:a.data});case"login/SET-IS-LOGGED-IN":return Object(v.a)(Object(v.a)({},e),{},{isLoggedIn:a.value});default:return e}},registration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET-IS-SIGN-UP":return Object(v.a)(Object(v.a)({},e),{},{isSignUp:a.value});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka,a=arguments.length>1?arguments[1]:void 0;return a.type,e},passwordRecovery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"FORGOT-PASSWORD-RESPONSE":return Object(v.a)(Object(v.a)({},e),{},{info:a.info});case"IS-MAIL-SENT":return Object(v.a)(Object(v.a)({},e),{},{isMailSent:a.isMailSent});default:return e}},newPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET-NEW-PASSWORD":return Object(v.a)(Object(v.a)({},e),{},{passwordIsSet:a.passwordIsSet});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"APP/SET-STATUS":return Object(v.a)(Object(v.a)({},e),{},{status:a.status});case"APP/SET-ERROR":return Object(v.a)(Object(v.a)({},e),{},{error:a.error});case"APP/SET-IS-INITIALIZED":return Object(v.a)(Object(v.a)({},e),{},{isInitialized:a.isInitialized});default:return e}},packs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET-PACKS":return Object(v.a)(Object(v.a)({},e),{},{packs:a.packs.map((function(e){return Object(v.a)({},e)}))});case"SET-PACKS-TOTAL-COUNT":return Object(v.a)(Object(v.a)({},e),{},{cardPacksTotalCount:a.cardPacksTotalCount});case"SET-CURRENT-PAGE":return Object(v.a)(Object(v.a)({},e),{},{page:a.currentPage});default:return e}},cards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ca,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET-CARDS":return Object(v.a)(Object(v.a)({},e),{},{cards:Object(na.a)({},a.packID,a.cards)});case"SET-CARDS-TOTAL-COUNT":return Object(v.a)(Object(v.a)({},e),{},{cardsTotalCount:a.cardsTotalCount});case"SET-CURRENT-PAGE":return Object(v.a)(Object(v.a)({},e),{},{page:a.currentPage});default:return e}}}),Ra=Object(Pa.d)(_a,Object(Pa.a)(ya.a));window.store=Ra,console.log(Ra.getState());var Na=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,237)).then((function(a){var t=a.getCLS,r=a.getFID,n=a.getFCP,c=a.getLCP,o=a.getTTFB;t(e),r(e),n(e),c(e),o(e)}))};o.a.render(Object(m.jsx)(i.a,{basename:"/friday-cards-project",children:Object(m.jsx)(s.a,{store:Ra,children:Object(m.jsx)(Sa,{})})}),document.getElementById("root")),Na()},48:function(e,a,t){e.exports={tablePackRow:"Pack_tablePackRow__2eKV6",tableRowCellName:"Pack_tableRowCellName__3O8XQ",tableRowCellCardsCount:"Pack_tableRowCellCardsCount__2hA7C",tableRowCellGrade:"Pack_tableRowCellGrade__thz4Q",tableRowCellUpdated:"Pack_tableRowCellUpdated___Jesj",tableRowCellCardsLink:"Pack_tableRowCellCardsLink__3jrql"}},49:function(e,a,t){e.exports={packsHeader:"Packs_packsHeader__2RK9l",showMyPacksTitle:"Packs_showMyPacksTitle__3mNtJ",packsTable:"Packs_packsTable__1vmPs",packsTableHead:"Packs_packsTableHead__2bWDe",packsTableHeadColumnRow:"Packs_packsTableHeadColumnRow__1dTPo",cell:"Packs_cell__23skK"}},54:function(e,a,t){e.exports={tableCardRow:"Card_tableCardRow__3WRNI",tableRowCellQuestion:"Card_tableRowCellQuestion__3UVPu",tableRowCellAnswer:"Card_tableRowCellAnswer__1EzlM",tableRowCellGrade:"Card_tableRowCellGrade__L4gSP",tableRowCellUpdated:"Card_tableRowCellUpdated__3YMZL"}},55:function(e,a,t){e.exports={cardsHeader:"Cards_cardsHeader__3RndM",cardsTable:"Cards_cardsTable__uHFhc",cardsTableHead:"Cards_cardsTableHead__3rhbl",cardsTableHeadColumnRow:"Cards_cardsTableHeadColumnRow__3s8pF",cell:"Cards_cell__NTB7u"}},75:function(e,a,t){e.exports={profile:"Profile_profile__2x015",containerProfile:"Profile_containerProfile__iFORM",avatarContainer:"Profile_avatarContainer__20fxu"}},86:function(e,a,t){e.exports={loginFormContainer:"Login_loginFormContainer__2L8NZ",forgetPasswordContainer:"Login_forgetPasswordContainer__3trWV"}}},[[169,1,2]]]);
//# sourceMappingURL=main.f0affb21.chunk.js.map